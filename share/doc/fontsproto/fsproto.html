<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The X Font Service Protocol</title><meta name="generator" content="DocBook XSL Stylesheets Vsnapshot" /><style xmlns="" type="text/css">/*
 * Copyright (c) 2011 Gaetan Nadon
 * Copyright (c) 2010, Oracle and/or its affiliates. All rights reserved.
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice (including the next
 * paragraph) shall be included in all copies or substantial portions of the
 * Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 */

/*
 * Shared stylesheet for X.Org documentation translated to HTML format
 * http://www.sagehill.net/docbookxsl/UsingCSS.html
 * http://www.w3schools.com/css/default.asp
 * https://addons.mozilla.org/en-US/firefox/addon/web-developer/developers
 * https://addons.mozilla.org/en-US/firefox/addon/font-finder/
 */

/*
 * The sans-serif fonts are considered more legible on a computer screen
 * http://dry.sailingissues.com/linux-equivalents-verdana-arial.html
 *
 */
body {
  font-family: "Bitstream Vera Sans", "DejaVu Sans", Tahoma, Geneva, Arial, Sans-serif;
  /* In support of using "em" font size unit, the w3c recommended method */
  font-size: 100%;
}

/*
 * Selection: all elements requiring mono spaced fonts.
 *
 * The family names attempt to match the proportionally spaced font
 * family names such that the same font name is used for both.
 * We'd like to use Bitstream, for example, in both proportionally and
 * mono spaced font text.
 */
.command,
.errorcode,
.errorname,
.errortype,
.filename,
.funcsynopsis,
.function,
.parameter,
.programlisting,
.property,
.screen,
.structname,
.symbol,
.synopsis,
.type
{
  font-family:  "Bitstream Vera Sans Mono", "DejaVu Sans Mono", Courier, "Liberation Mono", Monospace;
}

/*
 * Books have a title page, a preface, some chapters and appendices,
 * a glossary, an index and a bibliography, in that order.
 *
 * An Article has no preface and no chapters. It has sections, appendices,
 * a glossary, an index and a bibliography.
 */

/*
 * Selection: book main title and subtitle
 */
div.book>div.titlepage h1.title,
div.book>div.titlepage h2.subtitle {
  text-align: center;
}

/*
 * Selection: article main title and subtitle
 */
div.article>div.titlepage h2.title,
div.article>div.titlepage h3.subtitle,
div.article>div.sect1>div.titlepage h2.title,
div.article>div.section>div.titlepage h2.title {
  text-align: center;
}

/*
 * Selection: various types of authors and collaborators, individuals or corporate
 *
 * These authors are not always contained inside an authorgroup.
 * They can be contained inside a lot of different parent types where they might
 * not be centered.
 * Reducing the margin at the bottom makes a visual separation between authors
 * We specify here the ones on the title page, others may be added based on merit.
 */
div.titlepage .authorgroup,
div.titlepage .author,
div.titlepage .collab,
div.titlepage .corpauthor,
div.titlepage .corpcredit,
div.titlepage .editor,
div.titlepage .othercredit {
  text-align: center;
  margin-bottom: 0.25em;
}

/*
 * Selection: the affiliation of various types of authors and collaborators,
 * individuals or corporate.
 */
div.titlepage .affiliation {
  text-align: center;
}

/*
 * Selection: product release information (X Version 11, Release 7)
 *
 * The releaseinfo element can be contained inside a lot of different parent
 * types where it might not be centered.
 * We specify here the one on the title page, others may be added based on merit.
 */
div.titlepage p.releaseinfo {
  font-weight: bold;
  text-align: center;
}

/*
 * Selection: publishing date
 */
div.titlepage .pubdate {
  text-align: center;
}

/*
 * The legal notices are displayed in smaller sized fonts
 * Justification is only supported in IE and therefore not requested.
 *
 */
.legalnotice {
  font-size: small;
  font-style: italic;
}

/*
 * For documentation having multiple licenses, the copyright and legalnotice
 * elements sequence cannot instantiated multiple times.
 * The copyright notice and license text are therefore coded inside a legalnotice
 * element. The role attribute on the paragraph is used to allow styling of the
 * copyright notice text which should not be italicized.
 */
p.multiLicensing {
  font-style: normal;
  font-size: medium;
}

/*
 * Selection: book or article main ToC title
 * A paragraph is generated for the title rather than a level 2 heading.
 * We do not want to select chapters sub table of contents, only the main one
 */
div.book>div.toc>p,
div.article>div.toc>p {
  font-size: 1.5em;
  text-align: center;
}

/*
 * Selection: major sections of a book or an article
 *
 * Unlike books, articles do not have a titlepage element for appendix.
 * Using the selector "div.titlepage h2.title" would be too general.
 */
div.book>div.preface>div.titlepage h2.title,
div.book>div.chapter>div.titlepage h2.title,
div.article>div.sect1>div.titlepage h2.title,
div.article>div.section>div.titlepage h2.title,
div.book>div.appendix>div.titlepage h2.title,
div.article>div.appendix h2.title,
div.glossary>div.titlepage h2.title,
div.index>div.titlepage h2.title,
div.bibliography>div.titlepage h2.title {
   /* Add a border top over the major parts, just like printed books */
   /* The Gray color is already used for the ruler over the main ToC. */
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: Gray;
  /* Put some space between the border and the title */
  padding-top: 0.2em;
  text-align: center;
}

/*
 * A Screen is a verbatim environment for displaying text that the user might
 * see on a computer terminal. It is often used to display the results of a command.
 *
 * http://www.css3.info/preview/rounded-border/
 */
.screen {
  background: #e0ffff;
  border-width: 1px;
  border-style: solid;
  border-color: #B0C4DE;
  border-radius: 1.0em;
  /* Browser's vendor properties prior to CSS 3 */
  -moz-border-radius: 1.0em;
  -webkit-border-radius: 1.0em;
  -khtml-border-radius: 1.0em;
  margin-left: 1.0em;
  margin-right: 1.0em;
  padding: 0.5em;
}

/*
 * Emphasis program listings with a light shade of gray similar to what
 * DocBook XSL guide does: http://www.sagehill.net/docbookxsl/ProgramListings.html
 * Found many C API docs on the web using like shades of gray.
 */
.programlisting {
  background: #F4F4F4;
  border-width: 1px;
  border-style: solid;
  border-color: Gray;
  padding: 0.5em;
}

/*
 * Emphasis functions synopsis using a darker shade of gray.
 * Add a border such that it stands out more.
 * Set the padding so the text does not touch the border.
 */
.funcsynopsis, .synopsis {
  background: #e6e6fa;
  border-width: 1px;
  border-style: solid;
  border-color: Gray;
  clear: both;
  margin: 0.5em;
  padding: 0.25em;
}

/*
 * Selection: paragraphs inside synopsis
 *
 * Removes the default browser margin, let the container set the padding.
 * Paragraphs are not always used in synopsis
 */
.funcsynopsis p,
.synopsis p {
  margin: 0;
  padding: 0;
}

/*
 * Selection: variable lists, informal tables and tables
 *
 * Note the parameter name "variablelist.as.table" in xorg-xhtml.xsl
 * A table with rows and columns is constructed inside div.variablelist
 *
 * Set the left margin so it is indented to the right
 * Display informal tables with single line borders
 */
table {
  margin-left: 0.5em;
  border-collapse: collapse;
}

/*
 * Selection: paragraphs inside tables
 *
 * Removes the default browser margin, let the container set the padding.
 * Paragraphs are not always used in tables
 */
td p {
  margin: 0;
  padding: 0;
}

/*
 * Add some space between the left and right column.
 * The vertical alignment helps the reader associate a term
 * with a multi-line definition.
 */
td, th {
  padding-left: 1.0em;
  padding-right: 1.0em;
  vertical-align: top;
}

.warning {
  border: 1px solid red;
  background: #FFFF66;
  padding-left: 0.5em;
}
</style></head><body><div class="book"><div class="titlepage"><div><div><h1 class="title"><a id="fsproto"></a>The X Font Service Protocol</h1></div><div><h2 class="subtitle">X Consortium Standard</h2></div><div><div class="authorgroup"><div class="author"><h3 class="author"><span class="firstname">Jim</span> <span class="surname">Fulton</span></h3><div class="affiliation"><span class="orgname">Network Computing Devices, Inc.<br /></span></div></div></div></div><div><p class="releaseinfo">X Version 11, Release 7.7</p></div><div><p class="releaseinfo">Version 2.0</p></div><div><p class="copyright">Copyright © 1991 Network Computing Devices, Inc.</p></div><div><div class="legalnotice"><a id="idm17"></a><p>
Permission to use, copy, modify, distribute, and sell this
documentation for any purpose is hereby granted without fee,
provided that the above copyright notice and this permission
notice appear in all copies.  Network Computing Devices, Inc.
makes no representations about the suitability for any purpose
of the information in this document.  This documentation is
provided “as is” without express or implied warranty.
</p></div></div><div><div class="legalnotice"><a id="idm19"></a><p class="multiLicensing">Copyright © 1994 X Consortium</p><p>
Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the “Software”), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:
</p><p>
The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.
</p><p>
THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE
X CONSORTIUM BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN
AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN
CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
</p><p>
Except as contained in this notice, the name of the X Consortium shall not be
used in advertising or otherwise to promote the sale, use or other dealings
in this Software without prior written authorization from the X Consortium.
</p></div></div></div><hr /></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="chapter"><a href="#Introduction">1. Introduction</a></span></dt><dt><span class="chapter"><a href="#Architectural_Model">2. Architectural Model</a></span></dt><dt><span class="chapter"><a href="#Font_Server_Naming">3. Font Server Naming</a></span></dt><dd><dl><dt><span class="section"><a href="#TCPIP_Names">TCP/IP Names</a></span></dt><dt><span class="section"><a href="#DECnet_Names">DECnet Names</a></span></dt></dl></dd><dt><span class="chapter"><a href="#Protocol">4. Protocol</a></span></dt><dd><dl><dt><span class="section"><a href="#Data_Types">Data Types</a></span></dt><dd><dl><dt><span class="section"><a href="#Data_Types:ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a></span></dt><dt><span class="section"><a href="#Data_Types:ALTERNATESERVER"><span class="type">ALTERNATESERVER</span></a></span></dt><dt><span class="section"><a href="#Data_Types:AUTH"><span class="type">AUTH</span></a></span></dt><dt><span class="section"><a href="#Data_Types:BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a></span></dt><dt><span class="section"><a href="#Data_Types:BITMAPFORMATMASK"><span class="type">BITMAPFORMATMASK</span></a></span></dt><dt><span class="section"><a href="#Data_Types:BOOL"><span class="type">BOOL</span></a></span></dt><dt><span class="section"><a href="#Data_Types:BYTE"><span class="type">BYTE</span></a></span></dt><dt><span class="section"><a href="#Data_Types:CARDn"><span class="type">CARD8</span>, <span class="type">CARD16</span>, <span class="type">CARD32</span></a></span></dt><dt><span class="section"><a href="#Data_Types:CHAR2B"><span class="type">CHAR2B</span></a></span></dt><dt><span class="section"><a href="#Data_Types:EVENTMASK"><span class="type">EVENTMASK</span></a></span></dt><dt><span class="section"><a href="#Data_Types:FONTID"><span class="type">FONTID</span></a></span></dt><dt><span class="section"><a href="#Data_Types:ID"><span class="type">ID</span></a></span></dt><dt><span class="section"><a href="#Data_Types:INTn"><span class="type">INT8</span>, <span class="type">INT16</span>, <span class="type">INT32</span></a></span></dt><dt><span class="section"><a href="#Data_Types:OFFSET32"><span class="type">OFFSET32</span></a></span></dt><dt><span class="section"><a href="#Data_Types:PROPINFO"><span class="type">PROPINFO</span></a></span></dt><dt><span class="section"><a href="#Data_Types:PROPOFFSET"><span class="type">PROPOFFSET</span></a></span></dt><dt><span class="section"><a href="#Data_Types:RANGE"><span class="type">RANGE</span></a></span></dt><dt><span class="section"><a href="#Data_Types:RESOLUTION"><span class="type">RESOLUTION</span></a></span></dt><dt><span class="section"><a href="#Data_Types:STRING8"><span class="type">STRING8</span></a></span></dt><dt><span class="section"><a href="#Data_Types:TIMESTAMP"><span class="type">TIMESTAMP</span></a></span></dt><dt><span class="section"><a href="#Data_Types:XCHARINFO"><span class="type">XCHARINFO</span></a></span></dt><dt><span class="section"><a href="#Data_Types:XFONTINFO"><span class="type">XFONTINFO</span></a></span></dt></dl></dd><dt><span class="section"><a href="#Requests">Requests</a></span></dt><dd><dl><dt><span class="section"><a href="#Requests:open_connection">open connection</a></span></dt><dt><span class="section"><a href="#idm1543"></a></span></dt><dt><span class="section"><a href="#Requests:NoOp"><code class="function">NoOp</code></a></span></dt><dt><span class="section"><a href="#Requests:ListExtensions"><code class="function">ListExtensions</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryExtension"><code class="function">QueryExtension</code></a></span></dt><dt><span class="section"><a href="#Requests:ListCatalogues"><code class="function">ListCatalogues</code></a></span></dt><dt><span class="section"><a href="#Requests:SetCatalogues"><code class="function">SetCatalogues</code></a></span></dt><dt><span class="section"><a href="#Requests:GetCatalogues"><code class="function">GetCatalogues</code></a></span></dt><dt><span class="section"><a href="#Requests:SetEventMask"><code class="function">SetEventMask</code></a></span></dt><dt><span class="section"><a href="#Requests:GetEventMask"><code class="function">GetEventMask</code></a></span></dt><dt><span class="section"><a href="#Requests:CreateAC"><code class="function">CreateAC</code></a></span></dt><dt><span class="section"><a href="#Requests:FreeAC"><code class="function">FreeAC</code></a></span></dt><dt><span class="section"><a href="#Requests:SetAuthorization"><code class="function">SetAuthorization</code></a></span></dt><dt><span class="section"><a href="#Requests:SetResolution"><code class="function">SetResolution</code></a></span></dt><dt><span class="section"><a href="#Requests:GetResolution"><code class="function">GetResolution</code></a></span></dt><dt><span class="section"><a href="#Requests:ListFonts"><code class="function">ListFonts</code></a></span></dt><dt><span class="section"><a href="#Requests:ListFontsWithXInfo"><code class="function">ListFontsWithXInfo</code></a></span></dt><dt><span class="section"><a href="#Requests:OpenBitmapFont"><code class="function">OpenBitmapFont</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryXInfo"><code class="function">QueryXInfo</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryXExtents8"><code class="function">QueryXExtents8</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryXExtents16"><code class="function">QueryXExtents16</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryXBitmaps8"><code class="function">QueryXBitmaps8</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryXBitmaps16"><code class="function">QueryXBitmaps16</code></a></span></dt><dt><span class="section"><a href="#Requests:CloseFont"><code class="function">CloseFont</code></a></span></dt><dt><span class="section"><a href="#Requests:close_connection">close connection</a></span></dt></dl></dd><dt><span class="section"><a href="#Errors">Errors</a></span></dt><dd><dl><dt><span class="section"><a href="#Errors:Request"><span class="errorname">Request</span></a></span></dt><dt><span class="section"><a href="#Errors:Format"><span class="errorname">Format</span></a></span></dt><dt><span class="section"><a href="#Errors:Font"><span class="errorname">Font</span></a></span></dt><dt><span class="section"><a href="#Errors:Range"><span class="errorname">Range</span></a></span></dt><dt><span class="section"><a href="#Errors:EventMask"><span class="errorname">EventMask</span></a></span></dt><dt><span class="section"><a href="#Errors:AccessContext"><span class="errorname">AccessContext</span></a></span></dt><dt><span class="section"><a href="#Errors:IDChoice"><span class="errorname">IDChoice</span></a></span></dt><dt><span class="section"><a href="#Errors:Name"><span class="errorname">Name</span></a></span></dt><dt><span class="section"><a href="#Errors:Resolution"><span class="errorname">Resolution</span></a></span></dt><dt><span class="section"><a href="#Errors:Alloc"><span class="errorname">Alloc</span></a></span></dt><dt><span class="section"><a href="#Errors:Length"><span class="errorname">Length</span></a></span></dt><dt><span class="section"><a href="#Errors:Implementation"><span class="errorname">Implementation</span></a></span></dt><dt><span class="section"><a href="#Errors:Extensions">Extensions</a></span></dt></dl></dd><dt><span class="section"><a href="#Events">Events</a></span></dt><dd><dl><dt><span class="section"><a href="#Events:KeepAlive"><code class="function">KeepAlive</code></a></span></dt><dt><span class="section"><a href="#Events:CatalogueListNotify"><code class="function">CatalogueListNotify</code></a></span></dt><dt><span class="section"><a href="#Events:FontListNotify"><code class="function">FontListNotify</code></a></span></dt><dt><span class="section"><a href="#Events:Extensions">Extensions</a></span></dt></dl></dd></dl></dd><dt><span class="chapter"><a href="#Protocol_Encoding">5. Protocol Encoding</a></span></dt><dd><dl><dt><span class="section"><a href="#Encoding::Data_Types">Data Types</a></span></dt><dt><span class="section"><a href="#Encoding::Requests">Requests</a></span></dt><dt><span class="section"><a href="#Encoding::Errors">Errors</a></span></dt><dt><span class="section"><a href="#Encoding::Events">Events</a></span></dt></dl></dd><dt><span class="chapter"><a href="#Acknowledgements">6. Acknowledgements</a></span></dt><dt><span class="bibliography"><a href="#References">References</a></span></dt><dt><span class="appendix"><a href="#suggested_licensing_policies">A. Suggested Licensing Policies</a></span></dt><dt><span class="appendix"><a href="#implementation_suggestions">B. Implementation Suggestions</a></span></dt><dt><span class="index"><a href="#index">Index</a></span></dt></dl></div><div class="list-of-figures"><p><strong>List of Figures</strong></p><dl><dt>2.1. <a href="#figure2.1">Connecting to a Font Server</a></dt><dt>2.2. <a href="#figure2.2">Where Font Data Comes From</a></dt></dl></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Introduction"></a>Chapter 1. Introduction</h1></div></div></div><p>
The management of fonts in large, heterogeneous environments is one of the
hardest aspects of using the X Window System
<a href="#ftn.footnote1" class="footnote" id="footnote1"><sup class="footnote">[1]</sup></a>
.  Multiple formats and the lack of
a consistent mechanism for exporting font data to all displays on a network
prevent the transparent use of applications across different display platforms.
The X Font Service protocol is designed to address this and other issues, with
specific emphasis on the needs of the core X protocol.  Upward-compatible
changes (typically in the form of new requests) are expected as consensus is
reached on new features (particularly outline font support).
</p><p>
Currently, most X displays use network file protocols such as
<acronym class="acronym">NFS</acronym> and <acronym class="acronym">TFTP</acronym> to
obtain raw font data which they parse directly.  Since a common binary format
for this data doesn't exist, displays must be able to interpret a variety of
formats if they are to be used with different application hosts.  This leads to
wasted code and data space and a loss of interoperability as displays are used
in unforeseen environments.
</p><p>
By moving the interpretation of font data out of the X server into a separate
service on the network, these problems can be greatly reduced.  In addition,
new technologies, such as dynamically generating bitmaps from scaled or outline
fonts, can be provided to all displays transparently.  For horizontal text,
caching techniques and increased processor power can potentially make
rasterization more efficient on large, centralized hosts than on individual
displays.
</p><p>
Each font server provides sets of fonts that may be listed and queried for
header, property, glyph extents, and bitmap information.  This data is
transmitted over the network using a binary format (with variations to support
different bit- and byte-orders) designed to minimize the amount of processing
required by the display.  Since the font server, rather than the display, is
responsible for parsing the raw font data, new formats can be used by all
displays by modifying a single font server.
</p><p>
From the user's point of view, font servers are simply a new type of name in
the X font path.  Network name services allow descriptive names (such as
DEPARTMENT-FONTS or APPLICATION-FONTS) to be translated into proper network
addresses.  X displays send requests to and read replies from the font server
rather than reading directly from files.  Since the X Font Service protocol is
designed to allow subsets of the font data to be requested, displays may easily
implement a variety of strategies for fine-grained demand-loading of glyphs.
</p><div class="footnotes"><br /><hr style="width:100; text-align:left;margin-left: 0" /><div id="ftn.footnote1" class="footnote"><p><a href="#footnote1" class="para"><sup class="para">[1] </sup></a>
<em class="firstterm"><span class="trademark">X Window System</span>™</em>
is a trademark of The Open Group.
</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Architectural_Model"></a>Chapter 2. Architectural Model</h1></div></div></div><p>
In this document, the words <em class="firstterm">client</em> and
<em class="firstterm">server</em> refer to the consumer and
provider of a font, respectively, unless otherwise indicated.  It is important
to note that in this context, the X server is also a font client.
</p><p>
The X Font Service protocol does not require any changes to the core X protocol
or to any applications.  To the user, font servers are simply additional types
of font path elements.  As such, X servers may connect to multiple font
servers, as shown in Figure 2.1.  Although the font protocol is geared towards
the X Window System, it may be also used by other consumers of font data (such
as printer drivers).
</p><div class="figure"><a id="figure2.1"></a><p class="title"><strong>Figure 2.1. Connecting to a Font Server</strong></p><div class="figure-contents"><pre class="literallayout">
 ┌────────┐              ┌───────────────┐
 │   X1   ├──────────────┤               │
 │ Server │              │  Font Server  │
 └────────┘      ┌───────┤      1        │
                 │       └───────────────┘
 ┌────────┐      │
 │   X2   ├──────┘       ┌───────────────┐
 │ Server ├──────────────┤               │
 └────────┘              │  Font Server  │
                 ┌───────┤      2        │
┌─────────┐      │       └───────────────┘
│  other  │      │
│ clients ├──────┘
└─────────┘
</pre></div></div><br class="figure-break" /><p>
Clients communicate with the font server using the request/reply/event model
over any mutually-understood virtual stream connection (such as
<acronym class="acronym">TCP/IP</acronym>, DECnet,
<a href="#ftn.footnote2" class="footnote" id="footnote2"><sup class="footnote">[2]</sup></a>
etc.).  Font servers are responsible for providing data in the bit and byte
orders requested by the client.  The set of requests and events provided in the
first version of the X Font Service protocol is limited to supporting the needs
of the bitmap-oriented core X Window System protocol.  Extensions are expected
as new needs evolve.
</p><p>
A font server reads raw font data from a variety of sources (possibly
including other font servers) and converts it into a common format that is
transmitted to the client using the protocol described in
<a class="link" href="#Protocol" title="Chapter 4. Protocol">Section 4</a>.  New font
formats are handled by adding new converters to a font server, as shown in
Figure 2.2.
</p><div class="figure"><a id="figure2.2"></a><p class="title"><strong>Figure 2.2. Where Font Data Comes From</strong></p><div class="figure-contents"><pre class="literallayout">
                ┌────────────┐
                │   client   │
                │ (X server) │
                └─────┬──────┘
                      │
                   network
                      │
┌─────────────────────┴──────────────────────┐
│                                            │
│                font server 1               │
│                                            │
├─────┬─────┬─────┬─────┬────┬─────┬───┬─────┤
│ bdf │ snf │ pcf │ atm │ f3 │ dwf │ │ │ ... │
└─────┴─────┴─────┴─────┴────┴─────┴─│─┴─────┘
                                     │
                                  network
                                     │
                               ┌─────┴────┐
                               │   font   │
                               │ server 2 │
                               └──────────┘
</pre></div></div><br class="figure-break" /><p>
The server may choose to provide named sets of fonts called
<em class="firstterm">catalogues</em>.
Clients may specify which of the sets should be used in listing or opening a
font.
</p><p>
An event mechanism similar to that used in the X protocol is provided for
asynchronous notification of clients by the server.
</p><p>
Clients may provide authorization data for the server to be used in determining
(according to the server's licensing policy) whether or not access should be
granted to particular fonts.  This is particularly useful for clients whose
authorization changes over time (such as an X server that can verify the
identity of the user).
</p><p>
Implementations that wish to provide additional requests or events may use the
extension mechanism.  Adding to the core font service protocol (with the
accompanying change in the major or minor version numbers) is reserved to the X
Consortium.
</p><div class="footnotes"><br /><hr style="width:100; text-align:left;margin-left: 0" /><div id="ftn.footnote2" class="footnote"><p><a href="#footnote2" class="para"><sup class="para">[2] </sup></a>
<em class="firstterm"><span class="trademark">DECnet</span>™</em> is a trademark
of Digital Equipment Corporation.
</p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Font_Server_Naming"></a>Chapter 3. Font Server Naming</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="#TCPIP_Names">TCP/IP Names</a></span></dt><dt><span class="section"><a href="#DECnet_Names">DECnet Names</a></span></dt></dl></div><p>
Font clients that expose font server names to the user are encouraged to
provide ways of naming font servers symbolically (e.g. DEPARTMENT-FONTS).
However, for environments that lack appropriate name services
transport-specific names are necessary.  Since these names do occur in the
protocol, clients and servers should support at least the applicable formats
described below.  Formats for additional transports may be registered with the
X Consortium.
</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="TCPIP_Names"></a>TCP/IP Names</h2></div></div></div><p>
The following syntax should be used for TCP/IP names:

</p><pre class="literallayout">
    <em class="replaceable"><code>TCP name</code></em>  ::=  <code class="literal">tcp/</code> <em class="replaceable"><code>hostname</code></em> <code class="literal">:</code> <em class="replaceable"><code>ipportnumber</code></em> [<span class="optional"><code class="literal">/</code> <em class="replaceable"><code>cataloguelist</code></em></span>]
</pre><p>

where <em class="replaceable"><code>hostname</code></em> is either symbolic (such as
<code class="systemitem">expo.lcs.mit.edu</code>) or numeric
decimal (such as <code class="systemitem">18.30.0.212</code>).
The <em class="replaceable"><code>ipportnumber</code></em> is the port on which the
font server is listening for connections.
The <em class="replaceable"><code>cataloguelist</code></em> string at
the end is optional and specifies a plus-separated list of catalogues
that may be requested.  For example:
</p><pre class="literallayout">
     tcp/expo.lcs.mit.edu:8012/available+special
     tcp/18.30.0.212:7890
</pre><p>
</p></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="DECnet_Names"></a>DECnet Names</h2></div></div></div><p>
The following syntax should be used for DECnet names:

</p><pre class="literallayout">
    <em class="replaceable"><code>DECnet name</code></em>  ::=  <code class="literal">decnet/</code> <em class="replaceable"><code>nodename</code></em> <code class="literal">::font$</code> <em class="replaceable"><code>objname</code></em> [<span class="optional"><code class="literal">/</code> <em class="replaceable"><code>cataloguelist</code></em></span>]
</pre><p>

where <em class="replaceable"><code>nodename</code></em> is either symbolic (such as
<code class="systemitem">SRVNOD</code>) or the
numeric decimal form of the DECnet address (such as
<code class="systemitem">44.70</code>).
The <em class="replaceable"><code>objname</code></em> is normal, case-insensitive DECnet
object name.  The <em class="replaceable"><code>cataloguelist</code></em> string
at the end is
optional and specifies a plus-separated list of catalogues that may be
requested.  For example:

</p><pre class="literallayout">
     DECNET/SRVNOD::FONT$DEFAULT/AVAILABLE
     decnet/44.70::font$other
</pre><p>
</p></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Protocol"></a>Chapter 4. Protocol</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="#Data_Types">Data Types</a></span></dt><dd><dl><dt><span class="section"><a href="#Data_Types:ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a></span></dt><dt><span class="section"><a href="#Data_Types:ALTERNATESERVER"><span class="type">ALTERNATESERVER</span></a></span></dt><dt><span class="section"><a href="#Data_Types:AUTH"><span class="type">AUTH</span></a></span></dt><dt><span class="section"><a href="#Data_Types:BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a></span></dt><dt><span class="section"><a href="#Data_Types:BITMAPFORMATMASK"><span class="type">BITMAPFORMATMASK</span></a></span></dt><dt><span class="section"><a href="#Data_Types:BOOL"><span class="type">BOOL</span></a></span></dt><dt><span class="section"><a href="#Data_Types:BYTE"><span class="type">BYTE</span></a></span></dt><dt><span class="section"><a href="#Data_Types:CARDn"><span class="type">CARD8</span>, <span class="type">CARD16</span>, <span class="type">CARD32</span></a></span></dt><dt><span class="section"><a href="#Data_Types:CHAR2B"><span class="type">CHAR2B</span></a></span></dt><dt><span class="section"><a href="#Data_Types:EVENTMASK"><span class="type">EVENTMASK</span></a></span></dt><dt><span class="section"><a href="#Data_Types:FONTID"><span class="type">FONTID</span></a></span></dt><dt><span class="section"><a href="#Data_Types:ID"><span class="type">ID</span></a></span></dt><dt><span class="section"><a href="#Data_Types:INTn"><span class="type">INT8</span>, <span class="type">INT16</span>, <span class="type">INT32</span></a></span></dt><dt><span class="section"><a href="#Data_Types:OFFSET32"><span class="type">OFFSET32</span></a></span></dt><dt><span class="section"><a href="#Data_Types:PROPINFO"><span class="type">PROPINFO</span></a></span></dt><dt><span class="section"><a href="#Data_Types:PROPOFFSET"><span class="type">PROPOFFSET</span></a></span></dt><dt><span class="section"><a href="#Data_Types:RANGE"><span class="type">RANGE</span></a></span></dt><dt><span class="section"><a href="#Data_Types:RESOLUTION"><span class="type">RESOLUTION</span></a></span></dt><dt><span class="section"><a href="#Data_Types:STRING8"><span class="type">STRING8</span></a></span></dt><dt><span class="section"><a href="#Data_Types:TIMESTAMP"><span class="type">TIMESTAMP</span></a></span></dt><dt><span class="section"><a href="#Data_Types:XCHARINFO"><span class="type">XCHARINFO</span></a></span></dt><dt><span class="section"><a href="#Data_Types:XFONTINFO"><span class="type">XFONTINFO</span></a></span></dt></dl></dd><dt><span class="section"><a href="#Requests">Requests</a></span></dt><dd><dl><dt><span class="section"><a href="#Requests:open_connection">open connection</a></span></dt><dt><span class="section"><a href="#idm1543"></a></span></dt><dt><span class="section"><a href="#Requests:NoOp"><code class="function">NoOp</code></a></span></dt><dt><span class="section"><a href="#Requests:ListExtensions"><code class="function">ListExtensions</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryExtension"><code class="function">QueryExtension</code></a></span></dt><dt><span class="section"><a href="#Requests:ListCatalogues"><code class="function">ListCatalogues</code></a></span></dt><dt><span class="section"><a href="#Requests:SetCatalogues"><code class="function">SetCatalogues</code></a></span></dt><dt><span class="section"><a href="#Requests:GetCatalogues"><code class="function">GetCatalogues</code></a></span></dt><dt><span class="section"><a href="#Requests:SetEventMask"><code class="function">SetEventMask</code></a></span></dt><dt><span class="section"><a href="#Requests:GetEventMask"><code class="function">GetEventMask</code></a></span></dt><dt><span class="section"><a href="#Requests:CreateAC"><code class="function">CreateAC</code></a></span></dt><dt><span class="section"><a href="#Requests:FreeAC"><code class="function">FreeAC</code></a></span></dt><dt><span class="section"><a href="#Requests:SetAuthorization"><code class="function">SetAuthorization</code></a></span></dt><dt><span class="section"><a href="#Requests:SetResolution"><code class="function">SetResolution</code></a></span></dt><dt><span class="section"><a href="#Requests:GetResolution"><code class="function">GetResolution</code></a></span></dt><dt><span class="section"><a href="#Requests:ListFonts"><code class="function">ListFonts</code></a></span></dt><dt><span class="section"><a href="#Requests:ListFontsWithXInfo"><code class="function">ListFontsWithXInfo</code></a></span></dt><dt><span class="section"><a href="#Requests:OpenBitmapFont"><code class="function">OpenBitmapFont</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryXInfo"><code class="function">QueryXInfo</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryXExtents8"><code class="function">QueryXExtents8</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryXExtents16"><code class="function">QueryXExtents16</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryXBitmaps8"><code class="function">QueryXBitmaps8</code></a></span></dt><dt><span class="section"><a href="#Requests:QueryXBitmaps16"><code class="function">QueryXBitmaps16</code></a></span></dt><dt><span class="section"><a href="#Requests:CloseFont"><code class="function">CloseFont</code></a></span></dt><dt><span class="section"><a href="#Requests:close_connection">close connection</a></span></dt></dl></dd><dt><span class="section"><a href="#Errors">Errors</a></span></dt><dd><dl><dt><span class="section"><a href="#Errors:Request"><span class="errorname">Request</span></a></span></dt><dt><span class="section"><a href="#Errors:Format"><span class="errorname">Format</span></a></span></dt><dt><span class="section"><a href="#Errors:Font"><span class="errorname">Font</span></a></span></dt><dt><span class="section"><a href="#Errors:Range"><span class="errorname">Range</span></a></span></dt><dt><span class="section"><a href="#Errors:EventMask"><span class="errorname">EventMask</span></a></span></dt><dt><span class="section"><a href="#Errors:AccessContext"><span class="errorname">AccessContext</span></a></span></dt><dt><span class="section"><a href="#Errors:IDChoice"><span class="errorname">IDChoice</span></a></span></dt><dt><span class="section"><a href="#Errors:Name"><span class="errorname">Name</span></a></span></dt><dt><span class="section"><a href="#Errors:Resolution"><span class="errorname">Resolution</span></a></span></dt><dt><span class="section"><a href="#Errors:Alloc"><span class="errorname">Alloc</span></a></span></dt><dt><span class="section"><a href="#Errors:Length"><span class="errorname">Length</span></a></span></dt><dt><span class="section"><a href="#Errors:Implementation"><span class="errorname">Implementation</span></a></span></dt><dt><span class="section"><a href="#Errors:Extensions">Extensions</a></span></dt></dl></dd><dt><span class="section"><a href="#Events">Events</a></span></dt><dd><dl><dt><span class="section"><a href="#Events:KeepAlive"><code class="function">KeepAlive</code></a></span></dt><dt><span class="section"><a href="#Events:CatalogueListNotify"><code class="function">CatalogueListNotify</code></a></span></dt><dt><span class="section"><a href="#Events:FontListNotify"><code class="function">FontListNotify</code></a></span></dt><dt><span class="section"><a href="#Events:Extensions">Extensions</a></span></dt></dl></dd></dl></div><p>
The protocol described below uses the request/reply/error model and is
specified using the same conventions outlined in
<span class="olink">Section 2
of the core X Window System protocol</span>
<a class="xref" href="#References:x11proto" title="X Window System Protocol Version 11">[<abbr class="abbrev">1</abbr>]</a>:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>

Data type names are spelled in upper case with no word separators,
as in:  <a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a>
    </p></li><li class="listitem"><p>

Alternate values are capitalized with no word separators,
as in:  <code class="constant">MaxWidth</code>
    </p></li><li class="listitem"><p>

Structure element declarations are in lower case with hyphens
as word separators, as in:  <em class="structfield"><code>byte-order-msb</code></em>
    </p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3><p>
Structure element names are referred to in
upper case (e.g. <em class="structfield"><code>BYTE-ORDER-MSB</code></em>) when used in
descriptions to set them off from the surrounding
text.  When this document is typeset they will be
printed in lower case in a distinct font.
      </p></div></li><li class="listitem"><p>
Type declarations have the form <span class="quote">“<span class="quote"><span class="type">name</span>: type</span>”</span>,
as in:  <span class="type">CARD8</span>: 8-bit byte
    </p></li><li class="listitem"><p>
Comma-separated lists of alternate values are enclosed in
braces, as in:  { <code class="constant">Min</code>, <code class="constant">MaxWidth</code>,
<code class="constant">Max</code> }
    </p></li><li class="listitem"><p>
Comma-separated lists of structure elements are enclosed in
brackets, as in:  [ <em class="structfield"><code>byte1</code></em>: <span class="type">CARD8</span>,
<em class="structfield"><code>byte2</code></em>: <span class="type">CARD8</span> ]
    </p></li></ul></div><p>
A type with a prefix <span class="quote">“<span class="quote">LISTof</span>”</span> represents a counted list of
elements of that type, as in:  <span class="type">LISTofCARD8</span>
</p><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Data_Types"></a>Data Types</h2></div></div></div><p>
The following data types are used in the core X Font Server protocol:
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:ACCESSCONTEXT"></a><span class="type">ACCESSCONTEXT</span></h3></div></div></div><a id="idm146" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">ACCESSCONTEXT</span>:</td><td align="left"><a class="link" href="#Data_Types:ID" title="ID"><span class="type">ID</span></a></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
This value is specified in the CreateAC request as the identifier
to be used when referring to a particular AccessContext resource
within the server.  These resources are used by the server to
store client-specified authorization information.  This
information may be used by the server to determine whether or not
the client should be granted access to particular font data.
</p><p>
In order to preserve the integrity of font licensing being performed by
the font server, care must be taken by a client to properly represent the
identity of the true user of the font.  Some font clients will in fact
be servers (for example, X servers) requesting fonts for their own clients.
Other font clients may be doing work on behalf of a number of different
users over time (for example, print spoolers).
</p><p>
<span class="type">AccessContext</span>s
must be created (with
<a class="link" href="#Requests:CreateAC" title="CreateAC"><code class="function">CreateAC</code></a>)
and switched among (with
<a class="link" href="#Requests:SetAuthorization" title="SetAuthorization"><code class="function">SetAuthorization</code></a>)
to represent all of these <span class="quote">“<span class="quote">font users</span>”</span> properly.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:ALTERNATESERVER"></a><span class="type">ALTERNATESERVER</span></h3></div></div></div><a id="idm172" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td rowspan="2" align="left"><span class="type">ALTERNATESERVER</span>:</td><td align="left"> [ <em class="structfield"><code>name</code></em>:</td><td align="left">  <a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a>,</td></tr><tr><td align="left"> <em class="structfield"><code>subset</code></em>:</td><td align="left">  <a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a> ]</td></tr></tbody></table></div><p>
This structure specifies the <em class="structfield"><code>NAME</code></em>,
encoded in <acronym class="acronym">ISO</acronym> 8859-1 according
to <a class="link" href="#Font_Server_Naming" title="Chapter 3. Font Server Naming">Section 3</a>,
of another font server that may be useful as a
substitute for this font server.
The <em class="structfield"><code>SUBSET</code></em> field indicates
whether or not the alternate server is likely to only contain a
subset of the fonts available from this font server.  This
information is returned during the initial connection setup and
may be used by the client to find a backup server in case of
failure.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:AUTH"></a><span class="type">AUTH</span></h3></div></div></div><a id="idm202" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td rowspan="2" align="left"><span class="type">AUTH</span>:</td><td align="left">[ <em class="structfield"><code>name</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a>,</td></tr><tr><td align="left"> <em class="structfield"><code>data</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">LISTofBYTE</span></a> ]</td></tr></tbody></table></div><p>
This structure specifies the name of an authorization protocol and
initial data for that protocol.  It is used in the authorization
negotiation in the initial connection setup and in the CreateAC
request.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:BITMAPFORMAT"></a><span class="type">BITMAPFORMAT</span></h3></div></div></div><a id="idm228" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">BITMAPFORMAT</span>:</td><td align="left"><span class="type">CARD32</span></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
   <span class="type">CARD32</span> containing the following fields defined by the
   sets of values given further below
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left">[</td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr><tr><td align="left"> <em class="structfield"><code>byte-order-msb</code></em>:</td><td align="left">      1 bit,</td><td class="auto-generated"> </td></tr><tr><td align="left"> <em class="structfield"><code>bit-order-msb</code></em>:</td><td align="left">       1 bit,</td><td class="auto-generated"> </td></tr><tr><td align="left"> <em class="structfield"><code>image-rect</code></em>:</td><td align="left">          2 bits</td><td align="left">{ <code class="constant">Min</code>,
                          <code class="constant">MaxWidth</code>,
                          <code class="constant">Max</code> },</td></tr><tr><td align="left"> <em class="structfield"><code>zero-pad</code></em>:</td><td align="left">            4 bits,</td><td class="auto-generated"> </td></tr><tr><td align="left"> <em class="structfield"><code>scanline-pad</code></em>:</td><td align="left">        2 bits</td><td align="left">{ <code class="constant">ScanlinePad8</code>,
                          <code class="constant">ScanlinePad16</code>,
                          <code class="constant">ScanlinePad32</code>,
                          <code class="constant">ScanlinePad64</code> },</td></tr><tr><td align="left"> <em class="structfield"><code>zero-pad</code></em>:</td><td align="left">            2 bits,</td><td class="auto-generated"> </td></tr><tr><td align="left"> <em class="structfield"><code>scanline-unit</code></em>:</td><td align="left">       2 bits</td><td align="left">{ <code class="constant">ScanlineUnit8</code>,
                          <code class="constant">ScanlineUnit16</code>,
                          <code class="constant">ScanlineUnit32</code>,
                          <code class="constant">ScanlineUnit64</code> },</td></tr><tr><td align="left"> <em class="structfield"><code>zero-pad</code></em>:</td><td align="left">            2 bits,</td><td class="auto-generated"> </td></tr><tr><td align="left"> <em class="structfield"><code>zero-pad</code></em>:</td><td align="left">            16 bits,</td><td class="auto-generated"> </td></tr><tr><td align="left">]</td><td class="auto-generated"> </td><td class="auto-generated"> </td></tr></tbody></table></div><p>
This structure specifies how glyph images are transmitted in
response to
<a class="link" href="#Requests:QueryXBitmaps8" title="QueryXBitmaps8"><code class="function">QueryXBitmaps8</code></a>
and
<a class="link" href="#Requests:QueryXBitmaps16" title="QueryXBitmaps16"><code class="function">QueryXBitmaps16</code></a>
requests.
</p><p>
If the <em class="structfield"><code>BYTE-ORDER-MSB</code></em> bit
<code class="literal">(1 &lt;&lt; 0)</code> is set, the Most Significant
Byte of each scanline unit is returned first.  Otherwise, the
Least Significant Byte is returned first.
</p><p>
If the <em class="structfield"><code>BIT-ORDER-MSB</code></em> bit
<code class="literal">(1 &lt;&lt; 1)</code> is set, the left-most bit in
each glyph scanline unit is stored in the Most Significant Bit of
each transmitted scanline unit.  Otherwise, the left-most bit is
stored in the Least Significant Bit.
</p><p>
The <em class="structfield"><code>IMAGE-RECT</code></em> field specifies a rectangle of
pixels within the
glyph image.  It contains one of the following alternate values:

    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><code class="constant">ImageRectMin</code></td><td align="left"><code class="literal">(0 &lt;&lt; 2)</code></td></tr><tr><td align="left"><code class="constant">ImageRectMaxWidth</code></td><td align="left"><code class="literal">(1 &lt;&lt; 2)</code></td></tr><tr><td align="left"><code class="constant">ImageRectMax</code></td><td align="left"><code class="literal">(2 &lt;&lt; 2)</code></td></tr></tbody></table></div><p>
</p><p>
For a glyph with extents <a class="link" href="#Data_Types:XCHARINFO" title="XCHARINFO"><span class="type">XCHARINFO</span></a> in a font with header
information <a class="link" href="#Data_Types:XFONTINFO" title="XFONTINFO"><span class="type">XFONTINFO</span></a>, the <em class="structfield"><code>IMAGE-RECT</code></em>
values have the following meanings:
</p><div class="variablelist"><table border="0" class="variablelist"><colgroup><col align="left" valign="top" /><col /></colgroup><tbody><tr><td><p><a id="Constant:ImageRectMin"></a><span class="term"><code class="constant">ImageRectMin</code></span></p></td><td><a id="idm347" class="indexterm"></a><p>
This refers to the minimal bounding rectangle
surrounding the inked pixels in the glyph.  This is the
most compact representation.  The edges of the rectangle
are:
</p><pre class="literallayout">
         left:     <em class="structfield"><code>XCHARINFO.LBEARING</code></em>
         right:    <em class="structfield"><code>XCHARINFO.RBEARING</code></em>
         top:      <em class="structfield"><code>XCHARINFO.ASCENT</code></em>
         bottom:   <em class="structfield"><code>XCHARINFO.DESCENT</code></em>
</pre><p>
      </p></td></tr><tr><td><p><a id="Constant:ImageRectMaxWidth"></a><span class="term"><code class="constant">ImageRectMaxWidth</code></span></p></td><td><a id="idm359" class="indexterm"></a><p>
This refers to the scanlines between the
glyph's ascent and descent, padded on the left to the minimum
left-bearing (or 0, whichever is less) and on the right to
the maximum right-bearing (or logical-width, whichever is
greater).  All glyph images share a common horizontal
origin.  This is a combination of <code class="constant">ImageRectMax</code> in the
horizontal direction and <code class="constant">ImageRectMin</code> in the vertical
direction.  The edges of the rectangle are:

</p><pre class="literallayout">
left:         min (<em class="structfield"><code>XFONTINFO.MIN-BOUNDS.LBEARING</code></em>, 0)
right:        max (<em class="structfield"><code>XFONTINFO.MAX-BOUNDS.RBEARING</code></em>,
                   <em class="structfield"><code>XFONTINFO.MAX-BOUNDS.WIDTH</code></em>)
top:               <em class="structfield"><code>XCHARINFO.ASCENT</code></em>
bottom:            <em class="structfield"><code>XCHARINFO.DESCENT</code></em>
</pre><p>
      </p></td></tr><tr><td><p><a id="Constant:ImageRectMax"></a><span class="term"><code class="constant">ImageRectMax</code></span></p></td><td><a id="idm374" class="indexterm"></a><p>
This refers to all scanlines, from the maximum
ascent (or the font ascent, whichever is greater) to the
maximum descent (or the font descent, whichever is greater),
padded to the same horizontal extents as <code class="constant">MaxWidth</code>.
All glyph images have the same sized bitmap and share a
common origin.  This is the least compact representation,
but may be the easiest or most efficient (particularly for
character cell fonts) for some clients to use.  The edges of
the rectangle are:

</p><pre class="literallayout">
left:         min (<em class="structfield"><code>XFONTINFO.MIN-BOUNDS.LBEARING</code></em>, 0)
right:        max (<em class="structfield"><code>XFONTINFO.MAX-BOUNDS.RBEARING</code></em>,
                   <em class="structfield"><code>XFONTINFO.MAX-BOUNDS.WIDTH</code></em>)
top:          max (<em class="structfield"><code>XFONTINFO.FONT-ASCENT</code></em>,
                   <em class="structfield"><code>XFONTINFO.MAX-BOUNDS.ASCENT</code></em>)
bottom:       max (<em class="structfield"><code>XFONTINFO.FONT-DESCENT</code></em>,
                   <em class="structfield"><code>XFONTINFO.MAX-BOUNDS.DESCENT</code></em>)
</pre><p>
      </p></td></tr></tbody></table></div><p>
</p><p>
The <em class="structfield"><code>SCANLINE-PAD</code></em> field specifies the number of
bits (8, 16, 32,
or 64) to which each glyph scanline is padded before transmitting.
It contains one of the following alternate values:
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><code class="constant">ScanlinePad8</code></td><td align="left"><code class="literal">(0 &lt;&lt; 8)</code></td></tr><tr><td align="left"><code class="constant">ScanlinePad16</code></td><td align="left"><code class="literal">(1 &lt;&lt; 8)</code></td></tr><tr><td align="left"><code class="constant">ScanlinePad32</code></td><td align="left"><code class="literal">(2 &lt;&lt; 8)</code></td></tr><tr><td align="left"><code class="constant">ScanlinePad64</code></td><td align="left"><code class="literal">(3 &lt;&lt; 8)</code></td></tr></tbody></table></div><p>
</p><p>
The <em class="structfield"><code>SCANLINE-UNIT</code></em> field specifies the number of
bits (8, 16, 32, or 64) that should be treated as a unit for swapping.
This value must be less than or equal to the number of bits specified by the
<em class="structfield"><code>SCANLINE-PAD</code></em>.  It contains one of the following
alternate values:

    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><code class="constant">ScanlineUnit8</code></td><td align="left"><code class="literal">(0 &lt;&lt; 12)</code></td></tr><tr><td align="left"><code class="constant">ScanlineUnit16</code></td><td align="left"><code class="literal">(1 &lt;&lt; 12)</code></td></tr><tr><td align="left"><code class="constant">ScanlineUnit32</code></td><td align="left"><code class="literal">(2 &lt;&lt; 12)</code></td></tr><tr><td align="left"><code class="constant">ScanlineUnit64</code></td><td align="left"><code class="literal">(3 &lt;&lt; 12)</code></td></tr></tbody></table></div><p>
</p><p>
<a class="link" href="#Data_Types:BITMAPFORMAT" title="BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a>s are byte-swapped as <span class="type">CARD32</span>s.
All unspecified bits must be zero.
</p><p>
Use of an invalid <a class="link" href="#Data_Types:BITMAPFORMAT" title="BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a> causes a
<a class="link" href="#Errors:Format" title="Format"><span class="errorname">Format</span></a> error to be returned.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:BITMAPFORMATMASK"></a><span class="type">BITMAPFORMATMASK</span></h3></div></div></div><a id="idm453" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">BITMAPFORMATMASK</span>:</td><td align="left">     <span class="type">CARD32</span> mask</td><td class="auto-generated"> </td></tr></tbody></table></div><p>
This is a mask of bits representing the fields in a <a class="link" href="#Data_Types:BITMAPFORMAT" title="BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a>:
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><code class="constant">ByteOrderMask</code></td><td align="left"><code class="literal">(1 &lt;&lt; 0)</code></td></tr><tr><td align="left"><code class="constant">BitOrderMask</code></td><td align="left"><code class="literal">(1 &lt;&lt; 1)</code></td></tr><tr><td align="left"><code class="constant">ImageRectMask</code></td><td align="left"><code class="literal">(1 &lt;&lt; 2)</code></td></tr><tr><td align="left"><code class="constant">ScanlinePadMask</code></td><td align="left"><code class="literal">(1 &lt;&lt; 3)</code></td></tr><tr><td align="left"><code class="constant">ScanlineUnitMask</code></td><td align="left"><code class="literal">(1 &lt;&lt; 4)</code></td></tr></tbody></table></div><p>
</p><p>
Unspecified bits are required to be zero or else a
<a class="link" href="#Errors:Format" title="Format"><span class="errorname">Format</span></a> error is returned.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:BOOL"></a><span class="type">BOOL</span></h3></div></div></div><a id="idm505" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">BOOL</span>:</td><td align="left">  <span class="type">CARD8</span></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
This is a boolean value containing one of the following alternate
values:
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><code class="constant">False</code></td><td align="left"><code class="literal">0</code></td></tr><tr><td align="left"><code class="constant">True</code></td><td align="left"><code class="literal">1</code></td></tr></tbody></table></div><p>
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:BYTE"></a><span class="type">BYTE</span></h3></div></div></div><a id="idm537" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">BYTE</span>:</td><td align="left">  8-bit value</td><td class="auto-generated"> </td></tr></tbody></table></div><p>
This is an unsigned byte of data whose encoding
is determined by the context in which it is used.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:CARDn"></a><span class="type">CARD8</span>, <span class="type">CARD16</span>, <span class="type">CARD32</span></h3></div></div></div><a id="idm555" class="indexterm"></a><a id="idm557" class="indexterm"></a><a id="idm559" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">CARD8</span>:</td><td align="left">  8-bit unsigned integer</td><td class="auto-generated"> </td></tr><tr><td align="left"><span class="type">CARD16</span>:</td><td align="left">  16-bit unsigned integer</td><td class="auto-generated"> </td></tr><tr><td align="left"><span class="type">CARD32</span>:</td><td align="left">  32-bit unsigned integer</td><td class="auto-generated"> </td></tr></tbody></table></div><p>
These are unsigned numbers.  The latter two are byte-swapped when
the server and client have different byte orders.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:CHAR2B"></a><span class="type">CHAR2B</span></h3></div></div></div><a id="idm583" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">CHAR2B</span>:</td><td align="left">[ <em class="structfield"><code>byte1</code></em>, <em class="structfield"><code>byte2</code></em>:</td><td align="left"><span class="type">CARD8</span> ]</td></tr></tbody></table></div><p>
This structure specifies an individual character code within
either a 2-dimensional matrix (using <em class="structfield"><code>BYTE1</code></em>
and <em class="structfield"><code>BYTE2</code></em> as the row and column indices,
respectively) or a vector (using <em class="structfield"><code>BYTE1</code></em> and
<em class="structfield"><code>BYTE2</code></em> as most- and least-significant bytes,
respectively).  This data type is treated as a pair of 8-bit values and
is never byte-swapped.  Therefore, the client should always transmit
<em class="structfield"><code>BYTE1</code></em> first.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:EVENTMASK"></a><span class="type">EVENTMASK</span></h3></div></div></div><a id="idm608" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">EVENTMASK</span>:</td><td align="left">  <span class="type">CARD32</span> mask</td><td class="auto-generated"> </td></tr></tbody></table></div><p>
This is a mask of bits indicating which of an extension's (or the
core's) maskable events the client would like to receive.  Each
bit indicates one or more events, and a bit value of one indicates
interest in a corresponding set of events.  The following bits are
defined for event masks specified for the core protocol (i.e. an
<em class="parameter"><code>EXTENSION-OPCODE</code></em> of zero in
<a class="link" href="#Requests:SetEventMask" title="SetEventMask"><code class="function">SetEventMask</code></a>
and
<a class="link" href="#Requests:GetEventMask" title="GetEventMask"><code class="function">GetEventMask</code></a>
requests):

    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><code class="constant">CatalogueListChangeMask</code></td><td align="left"><code class="literal">(1 &lt;&lt; 0)</code></td></tr><tr><td align="left"><code class="constant">FontListChangeMask</code></td><td align="left"><code class="literal">(1 &lt;&lt; 1)</code></td></tr></tbody></table></div><p>
</p><p>
If
<code class="constant">CatalogueListChangeMask</code>
is set, client is interested in
receiving
<a class="link" href="#Events:CatalogueListNotify" title="CatalogueListNotify"><code class="function">CatalogueListNotify</code></a>
events.  If
<code class="constant">FontListChangeMask</code>
is set, the client is interested in
receiving
<a class="link" href="#Events:FontListNotify" title="FontListNotify"><code class="function">FontListNotify</code></a>
events.
</p><p>
Extensions that provide additional events may define their own
event masks.  These event masks have their own scope and may use
the same bit values as the core or other extensions.
    </p><p>
All unused bits must be set to zero.  In
<a class="link" href="#Requests:SetEventMask" title="SetEventMask"><code class="function">SetEventMask</code></a>
requests, if
any bits are set that are not defined for the extension (or core)
for which this <span class="type">EVENTMASK</span> is intended (according to the
<em class="parameter"><code>EXTENSION-OPCODE</code></em> given in the
<a class="link" href="#Requests:SetEventMask" title="SetEventMask"><code class="function">SetEventMask</code></a>
request), an
<a class="link" href="#Errors:EventMask" title="EventMask"><span class="errorname">EventMask</span></a>
error is generated.
    </p><p>
This value is swapped as a <span class="type">CARD32</span>.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:FONTID"></a><span class="type">FONTID</span></h3></div></div></div><a id="idm664" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">FONTID</span>:</td><td align="left">     <a class="link" href="#Data_Types:ID" title="ID"><span class="type">ID</span></a></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
This is specified by the client in the request
<a class="link" href="#Requests:OpenBitmapFont" title="OpenBitmapFont"><code class="function">OpenBitmapFont</code></a>
as the identifier to be used when referring to a particular open
font.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:ID"></a><span class="type">ID</span></h3></div></div></div><a id="idm684" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">ID</span>:</td><td align="left">  <span class="type">CARD32</span></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
This is a 32-bit value in which the top 3 bits must be clear, and
at least 1 other bit must be set (yielding a range of 1 through
2<sup>29</sup>-1).
It is specified by the client to represent objects in
the server.  Identifiers are scoped according to their type are
private to the client; thus, the same identifier may be used for
both a <a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a> and an <a class="link" href="#Data_Types:ACCESSCONTEXT" title="ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a>
as well as by multiple clients.
</p><p>
An <span class="type">ID</span> of zero is referred to as <code class="constant">None</code>.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:INTn"></a><span class="type">INT8</span>, <span class="type">INT16</span>, <span class="type">INT32</span></h3></div></div></div><a id="idm711" class="indexterm"></a><a id="idm713" class="indexterm"></a><a id="idm715" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">INT8</span>:</td><td align="left">  8-bit signed integer</td><td class="auto-generated"> </td></tr><tr><td align="left"><span class="type">INT16</span>:</td><td align="left">  16-bit signed integer</td><td class="auto-generated"> </td></tr><tr><td align="left"><span class="type">INT32</span>:</td><td align="left">  32-bit signed integer</td><td class="auto-generated"> </td></tr></tbody></table></div><p>
These are signed numbers.  The latter two are byte-swapped when
the client and server have different byte orders.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:OFFSET32"></a><span class="type">OFFSET32</span></h3></div></div></div><a id="idm739" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td rowspan="2" align="left"><span class="type">OFFSET32</span>:</td><td align="left">[ <em class="structfield"><code>position</code></em>:</td><td align="left"><span class="type">CARD32</span>,</td></tr><tr><td align="left"> <em class="structfield"><code>length</code></em>:</td><td align="left"><span class="type">CARD32</span> ]</td></tr></tbody></table></div><p>
This structure indicates a position and length within a block of
data.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:PROPINFO"></a><span class="type">PROPINFO</span></h3></div></div></div><a id="idm763" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td rowspan="2" align="left"><span class="type">PROPINFO</span>:</td><td align="left">[ <em class="structfield"><code>offsets</code></em>:</td><td align="left"><a class="link" href="#Data_Types:PROPOFFSET" title="PROPOFFSET"><span class="type">LISTofPROPOFFSET</span></a>,</td></tr><tr><td align="left"> <em class="structfield"><code>data</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">LISTofBYTE</span></a> ]</td></tr></tbody></table></div><p>
This structure describes the list of properties provided by a
font.  Strings for all of the properties names and values are
stored within the data block and are located using a table of
offsets and lengths.
    </p><p>
This structure is padded to 32-bit alignment.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:PROPOFFSET"></a><span class="type">PROPOFFSET</span></h3></div></div></div><a id="idm790" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td rowspan="4" align="left"><span class="type">PROPOFFSET</span>:</td><td align="left">[ <em class="structfield"><code>name</code></em>:</td><td align="left"><a class="link" href="#Data_Types:OFFSET32" title="OFFSET32"><span class="type">OFFSET32</span></a>,</td></tr><tr><td align="left"> <em class="structfield"><code>value</code></em>:</td><td align="left"><a class="link" href="#Data_Types:OFFSET32" title="OFFSET32"><span class="type">OFFSET32</span></a>,</td></tr><tr><td align="left"> <em class="structfield"><code>type</code></em>:</td><td align="left"><span class="type">CARD8</span>,</td></tr><tr><td align="left"> <em class="structfield"><code>zero-pad3</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">BYTE</span></a>, <a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">BYTE</span></a>, <a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">BYTE</span></a> ]</td></tr></tbody></table></div><p>
This structure specifies the position, length, and type of
of data for a property.
    </p><p>
The <em class="structfield"><code>NAME</code></em> field specifies the position and length
(which must be
greater than zero) of the property name relative to the beginning
of the <em class="structfield"><code>PROPINFO.DATA</code></em> block for this font.
The interpretation of
the position and length of the <em class="structfield"><code>VALUE</code></em> field is
determined by the <em class="structfield"><code>TYPE</code></em> field, which contains
one of the following alternate values:

     </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><code class="constant">String</code></td><td align="left"><code class="literal">0</code></td></tr><tr><td align="left"><code class="constant">Unsigned</code></td><td align="left"><code class="literal">1</code></td></tr><tr><td align="left"><code class="constant">Signed</code></td><td align="left"><code class="literal">2</code></td></tr></tbody></table></div><p>
which have the following meanings:
</p><div class="variablelist"><table border="0" class="variablelist"><colgroup><col align="left" valign="top" /><col /></colgroup><tbody><tr><td><p><a id="Constant:String"></a><span class="term"><code class="constant">String</code></span></p></td><td><a id="idm858" class="indexterm"></a><p>
This property contains a counted string of bytes.  The
data is stored in the <em class="structfield"><code>PROPINFO.DATA</code></em>
block beginning at
relative byte VALUE.POSITION (beginning with zero), extending
for VALUE.LENGTH (at least zero) bytes.
      </p></td></tr><tr><td><p><a id="Constant:Unsigned"></a><span class="term"><code class="constant">Unsigned</code></span></p></td><td><a id="idm866" class="indexterm"></a><p>
This property contains a unsigned, 32-bit number stored
as a <span class="type">CARD32</span> in VALUE.POSITION (VALUE.LENGTH is zero).
    </p></td></tr><tr><td><p><a id="Constant:Signed"></a><span class="term"><code class="constant">Signed</code></span></p></td><td><a id="idm874" class="indexterm"></a><p>
This property contains a signed, 32-bit number stored as
an <span class="type">INT32</span> in VALUE.POSITION (VALUE.LENGTH is zero).
      </p></td></tr></tbody></table></div><p>
This structure is zero-padded to 32-bit alignment.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:RANGE"></a><span class="type">RANGE</span></h3></div></div></div><a id="idm881" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">RANGE</span>:</td><td align="left">[ <em class="structfield"><code>min-char</code></em>, <em class="structfield"><code>max-char</code></em>:</td><td align="left"><a class="link" href="#Data_Types:CHAR2B" title="CHAR2B"><span class="type">CHAR2B</span></a> ]</td></tr></tbody></table></div><p>
This structure specifies a range of character codes.  A single
character is represented by <em class="structfield"><code>MIN-CHAR</code></em> equals
<em class="structfield"><code>MAX-CHAR</code></em>.  If the linear interpretation of
<em class="structfield"><code>MAX-CHAR</code></em> is less than that of
<em class="structfield"><code>MIN-CHAR</code></em>, or if
<em class="structfield"><code>MIN-CHAR</code></em> is less than the font's
<em class="structfield"><code>XFONTINFO.CHAR-RANGE.MIN-CHAR</code></em>, or if
<em class="structfield"><code>MAX-CHAR</code></em> is greater than the
font's <em class="structfield"><code>XFONTINFO.CHAR-RANGE.MAX-CHAR</code></em>,
the range is invalid.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:RESOLUTION"></a><span class="type">RESOLUTION</span></h3></div></div></div><a id="idm910" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td rowspan="3" align="left"><span class="type">RESOLUTION</span>:</td><td align="left">[ <em class="structfield"><code>x-resolution</code></em>:</td><td align="left"><span class="type">CARD16</span>,</td></tr><tr><td align="left"> <em class="structfield"><code>y-resolution</code></em>:</td><td align="left"><span class="type">CARD16</span>,</td></tr><tr><td align="left"> <em class="structfield"><code>decipoint-size</code></em>:</td><td align="left"><span class="type">CARD16</span> ]</td></tr></tbody></table></div><p>
This structure specifies resolution and point size to be used in
resolving partially-specified scaled font names.  The
<em class="structfield"><code>X-RESOLUTION</code></em> and
<em class="structfield"><code>Y-RESOLUTION</code></em> are measured in
pixels-per-inch and must be greater than zero.
The <em class="structfield"><code>DECIPOINT-SIZE</code></em> is the preferred font
size, measured in tenths of a point, and must be greater than zero.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:STRING8"></a><span class="type">STRING8</span></h3></div></div></div><a id="idm942" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">STRING8</span>:</td><td align="left">          <span class="type">LISTofCARD8</span></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
This is a counted list of 1-byte character codes, typically
encoded in <acronym class="acronym">ISO</acronym> 8859-1.  A character code
<span class="quote">“<span class="quote"><code class="literal">c</code></span>”</span> is equivalent to a
<a class="link" href="#Data_Types:CHAR2B" title="CHAR2B"><span class="type">CHAR2B</span></a> structure whose <em class="structfield"><code>BYTE1</code></em>
is zero and whose <em class="structfield"><code>BYTE2</code></em> is
<span class="quote">“<span class="quote"><code class="literal">c</code></span>”</span>.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:TIMESTAMP"></a><span class="type">TIMESTAMP</span></h3></div></div></div><a id="idm968" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><span class="type">TIMESTAMP</span>:</td><td align="left">     <span class="type">CARD32</span></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
This is the number of milliseconds that have passed since a
server-dependent origin.  It is provided in errors and events and is
permitted to wrap.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:XCHARINFO"></a><span class="type">XCHARINFO</span></h3></div></div></div><a id="idm985" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td rowspan="4" align="left"><span class="type">XCHARINFO</span>:</td><td align="left">[ <em class="structfield"><code>lbearing</code></em>, <em class="structfield"><code>rbearing</code></em>:</td><td align="left"><span class="type">INT16</span>,</td></tr><tr><td align="left"> <em class="structfield"><code>width</code></em>:</td><td align="left"><span class="type">INT16</span>,</td></tr><tr><td align="left"> <em class="structfield"><code>ascent</code></em>, <em class="structfield"><code>descent</code></em>:</td><td align="left"><span class="type">INT16</span>,</td></tr><tr><td align="left"> <em class="structfield"><code>attributes</code></em>:</td><td align="left"><span class="type">CARD16</span> ]</td></tr></tbody></table></div><p>
This structure specifies the ink extents and horizontal escapement
(also known as the set- or logical width) of an individual
character.  The first five values represent directed distances in
a coordinate system whose origin is aligned with the lower-left
edge of the left-most pixel of the glyph baseline (i.e. the
baseline falls between two pixels as shown in Figure 3-1 of the
<em class="citetitle">Bitmap Distribution Format 2.1</em> Consortium standard
<a class="xref" href="#References:bdf-spec" title="Bitmap Distribution Format 2.1">[<abbr class="abbrev">2</abbr>]</a>).
  </p><p>
The <em class="structfield"><code>LBEARING</code></em> field specifies the
directed distance measured to the
right from the origin to the left edge of the left-most inked
pixel in the glyph.
  </p><p>
The <em class="structfield"><code>RBEARING</code></em> field specifies the
directed distance (measured to
the right) from the origin to the right edge of the right-most
inked pixel in the glyph.
  </p><p>
The <em class="structfield"><code>WIDTH</code></em> field specifies the
directed distance (measured to the
right) from the origin to the position where the next character
should appear (called the <em class="firstterm">escapement point</em>). This
distance includes any whitespace used for intercharacter padding and is
also referred to as the <em class="firstterm">logical width</em> or
<em class="firstterm">horizontal escapement</em>.
<a id="idm1029" class="indexterm"></a>
  </p><p>
The <em class="structfield"><code>ASCENT</code></em> field specifies the
directed distance (measured up)
from the baseline to the top edge of the top-most inked pixel
in the glyph.
  </p><p>
The <em class="structfield"><code>DESCENT</code></em> field specifies the
directed distance (measured
down) from the baseline to the bottom edge of the bottom-most
inked pixel.
  </p><p>
The <em class="structfield"><code>ATTRIBUTES</code></em> field specifies
glyph-specific information that
is passed through the application.  If this value is not being
used, it should be zero.
  </p><p>
The ink bounding box of a glyph is defined to be the smallest
rectangle that encloses all of the inked pixels.  This box has
a width of
<em class="structfield"><code>RBEARING</code></em> − <em class="structfield"><code>LBEARING</code></em>
pixels and a height of
<em class="structfield"><code>ASCENT</code></em> + <em class="structfield"><code>DESCENT</code></em> pixels.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Data_Types:XFONTINFO"></a><span class="type">XFONTINFO</span></h3></div></div></div><a id="idm1045" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td rowspan="9" align="left"><span class="type">XFONTINFO</span>:</td><td align="left">[ <em class="structfield"><code>flags</code></em>:</td><td align="left"><span class="type">CARD32</span>,</td></tr><tr><td align="left"> <em class="structfield"><code>drawing-direction</code></em>:</td><td align="left">{ <code class="constant">LeftToRight</code>, <code class="constant">RightToLeft</code> }</td></tr><tr><td align="left"> <em class="structfield"><code>char-range</code></em>:</td><td align="left"><a class="link" href="#Data_Types:RANGE" title="RANGE"><span class="type">RANGE</span></a>,</td></tr><tr><td align="left"> <em class="structfield"><code>default-char</code></em>:</td><td align="left"><a class="link" href="#Data_Types:CHAR2B" title="CHAR2B"><span class="type">CHAR2B</span></a>,</td></tr><tr><td align="left"> <em class="structfield"><code>min-bounds</code></em>:</td><td align="left"><a class="link" href="#Data_Types:XCHARINFO" title="XCHARINFO"><span class="type">XCHARINFO</span></a>,</td></tr><tr><td align="left"> <em class="structfield"><code>max-bounds</code></em>:</td><td align="left"><a class="link" href="#Data_Types:XCHARINFO" title="XCHARINFO"><span class="type">XCHARINFO</span></a>,</td></tr><tr><td align="left"> <em class="structfield"><code>font-ascent</code></em>:</td><td align="left"><span class="type">INT16</span>,</td></tr><tr><td align="left"> <em class="structfield"><code>font-descent</code></em>:</td><td align="left"><span class="type">INT16</span>,</td></tr><tr><td align="left"> <em class="structfield"><code>properties</code></em>:</td><td align="left"><a class="link" href="#Data_Types:PROPINFO" title="PROPINFO"><span class="type">PROPINFO</span></a> ]</td></tr></tbody></table></div><p>
This structure specifies attributes related to the font as a
whole.
  </p><p>
The <em class="structfield"><code>FLAGS</code></em> field is a bit mask containing zero
or more of the following boolean values (unspecified bits must be zero):

    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><code class="constant">AllCharactersExist</code></td><td align="left"><code class="literal">(1 &lt;&lt; 0)</code></td></tr><tr><td align="left"><code class="constant">InkInside</code></td><td align="left"><code class="literal">(1 &lt;&lt; 1)</code></td></tr><tr><td align="left"><code class="constant">HorizontalOverlap</code></td><td align="left"><code class="literal">(1 &lt;&lt; 2)</code></td></tr></tbody></table></div><p>

which have the following meanings:
</p><div class="variablelist"><table border="0" class="variablelist"><colgroup><col align="left" valign="top" /><col /></colgroup><tbody><tr><td><p><a id="Constant:AllCharactersExist"></a><span class="term"><code class="constant">AllCharactersExist</code></span></p></td><td><a id="idm1134" class="indexterm"></a><p>
If this bit is set, all of the characters in the range given by
<em class="structfield"><code>CHAR-RANGE</code></em> have glyphs encoded in
the font.  If this bit is clear, some of the characters
may not have encoded glyphs.
    </p></td></tr><tr><td><p><a id="Constant:InkInside"></a><span class="term"><code class="constant">InkInside</code></span></p></td><td><a id="idm1142" class="indexterm"></a><p>
If this bit is set, the inked pixels of each glyph
fall within the rectangle described by the font's ascent,
descent, origin, and the glyph's escapement point.  If
this bit is clear, there may be glyphs whose ink extends
outside this rectangle.
    </p></td></tr><tr><td><p><a id="Constant:HorizontalOverlap"></a><span class="term"><code class="constant">HorizontalOverlap</code></span></p></td><td><a id="idm1149" class="indexterm"></a><p>
If this bit is set, the two ink bounding
boxes (smallest rectangle enclosing the inked pixels) of
some pairs of glyphs in the font may overlap when displayed
side-by-side (i.e. the second character is imaged at the
escapement point of the first) on a common baseline.  If
this bit is clear, there are no pairs of glyphs whose ink
bounding boxes overlap.
    </p></td></tr></tbody></table></div><p>
</p><p><a id="Data_Types:XFONTINFO.DRAWING-DIRECTION"></a>
  <a id="idm1153" class="indexterm"></a>
  <a id="idm1155" class="indexterm"></a>
The <em class="structfield"><code>DRAWING-DIRECTION</code></em> field contains a hint
indicating whether most of the character metrics have a positive (or
<span class="quote">“<span class="quote"><code class="constant">LeftToRight</code></span>”</span>) logical width or a
negative (<span class="quote">“<span class="quote"><code class="constant">RightToLeft</code></span>”</span>) logical width.  It
contains the following alternate values:
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><code class="constant">LeftToRight</code></td><td align="left"><code class="literal">0</code></td></tr><tr><td align="left"><code class="constant">RightToLeft</code></td><td align="left"><code class="literal">1</code></td></tr></tbody></table></div><p>
</p><p>
The <em class="structfield"><code>CHAR-RANGE.MIN-CHAR</code></em>
and <em class="structfield"><code>CHAR-RANGE.MAX-CHAR</code></em> fields specify the
first and last character codes that have glyphs encoded in this font.
All fonts must have at least one encoded glyph (in which case the
<em class="structfield"><code>MIN-CHAR</code></em> and <em class="structfield"><code>MAX-CHAR</code></em>
are equal), but are not required to have glyphs
encoded at all positions between the first and last characters.
</p><p>
The <em class="structfield"><code>DEFAULT-CHAR</code></em> field specifies
the character code of the glyph
that the client should substitute for unencoded characters.  Requests
for extents or bitmaps for an unencoded character generate zero-filled
metrics and a zero-length glyph bitmap, respectively.
</p><p>
The <em class="structfield"><code>MIN-BOUNDS</code></em> and
<em class="structfield"><code>MAX-BOUNDS</code></em> fields contain the minimum and maximum
values of each of the extents field of all encoded characters in the
font (i.e. non-existent characters are ignored).
</p><p>
The <em class="structfield"><code>FONT-ASCENT</code></em> and
<em class="structfield"><code>FONT-DESCENT</code></em> fields specify the font designer's
logical height of the font, above and below the baseline,
respectively.  The sum of the two values is often used as the
vertical line spacing of the font.  Individual glyphs are permitted
to have ascents and descents that are greater than these values.
</p><p>
The <em class="structfield"><code>PROPERTIES</code></em> field contains the
property data associated with this font.
</p><p>
This structure is padded to 32-bit alignment.
</p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Requests"></a>Requests</h2></div></div></div><p>
This section describes the requests that may be sent by the client and the
replies or errors that are generated in response.  Versions of the protocol
with the same major version are required to be upward-compatible.
</p><p>
Every request on a given connection is implicitly assigned a sequence number,
starting with 1, that is used in replies, error, and events.  Servers are
required to generate replies and errors in the order in which the corresponding
requests are received.  Servers are permitted to add or remove fonts to the
list visible to the client between any two requests, but requests must be
processed atomically.  Each request packet is at least 4 bytes long and
contains the following fields:
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>major-opcode</code></em>:</td><td align="left"><span class="type">CARD8</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>minor-opcode</code></em>:</td><td align="left"><span class="type">CARD8</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>length</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
</p><p>

The <em class="parameter"><code>MAJOR-OPCODE</code></em> specifies which core request or
extension package this packet represents.  If the
<em class="parameter"><code>MAJOR-OPCODE</code></em> corresponds to a core request, the
<em class="parameter"><code>MINOR-OPCODE</code></em> contains 8 bits of request-specific data.
Otherwise, the <em class="parameter"><code>MINOR-OPCODE</code></em> specifies which extension
request this packet represents.  The <em class="parameter"><code>LENGTH</code></em> field
specifies the number of 4-byte units contained within the packet
and must be at least one.  If this field contains a value greater than one it
is followed by (<em class="parameter"><code>LENGTH</code></em> - 1) * 4 bytes
of request-specific data.  Unless
otherwise specified, unused bytes are not required to be zero.
</p><p>
If a request packet contains too little or too much data, the server returns
a <a class="link" href="#Errors:Length" title="Length"><span class="errorname">Length</span></a> error.
If the server runs out of internal
resources (such as memory) while processing a request, it returns an
<a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a> error.
If a server is deficient (and therefore non-compliant) and is unable to
process a request, it may return an
<a class="link" href="#Errors:Implementation" title="Implementation"><span class="errorname">Implementation</span></a> error.
If a client uses an extension request without previously having issued a
<a class="link" href="#Requests:QueryExtension" title="QueryExtension"><code class="function">QueryExtension</code></a>
request for that extension, the server responds with a
<a class="link" href="#Errors:Request" title="Request"><span class="errorname">Request</span></a>
error.  If the server encounters a request with an unknown
<em class="parameter"><code>MAJOR-OPCODE</code></em> or <em class="parameter"><code>MINOR-OPCODE</code></em>,
it responds with a
<a class="link" href="#Errors:Request" title="Request"><span class="errorname">Request</span></a>
error.
At most one error is generated per request.  If more than one error condition
is encountered in processing a requests, the choice of which error is returned
is server-dependent.
</p><p>
Core requests have <em class="parameter"><code>MAJOR-OPCODE</code></em> values between 0 and
127, inclusive.  Extension requests have <em class="parameter"><code>MAJOR-OPCODE</code></em>
values between 128 and 255, inclusive, that are assigned by by the server.
All <em class="parameter"><code>MINOR-OPCODE</code></em> values in extension requests are
between 0 and 255, inclusive.
</p><p>
Each reply is at least 8 bytes long and contains the following fields:
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>type</code></em>:</td><td align="left"><span class="type">CARD8</span></td><td align="left">value of 0</td></tr><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD8</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>sequence-number</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>length</code></em>:</td><td align="left"><span class="type">CARD32</span></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
</p><p>
The <em class="parameter"><code>TYPE</code></em> field has a value of zero.
The <em class="parameter"><code>DATA-OR-UNUSED</code></em> field may be used to
encode one byte of reply-specific data (see
<a class="link" href="#Encoding::Requests" title="Requests">Section 5.2 on request encoding</a>).
The least-significant 16 bits of the sequence number of the request that
generated the reply are stored in the <em class="parameter"><code>SEQUENCE-NUMBER</code></em>
field.  The <em class="parameter"><code>LENGTH</code></em> field specifies the number of
4-byte units in this reply packet, including the fields described above,
and must be at least two.  If <em class="parameter"><code>LENGTH</code></em> is greater
than two, the fields described above are followed by
(<em class="parameter"><code>LENGTH</code></em> - 2) * 4 bytes of additional data.
</p><p>
Requests that have replies are described using the following syntax:
  </p><div class="blockquote"><blockquote class="blockquote"><p>
    <span class="bold"><strong><code class="function">RequestName</code></strong></span>
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>arg1</code></em>:</td><td align="left"><span class="type">type1</span></td></tr><tr><td align="left"><em class="parameter"><code>arg2</code></em>:</td><td align="left"><span class="type">type2</span></td></tr><tr><td align="left"> ...</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>argN</code></em>:</td><td align="left"><span class="type">typeN</span></td></tr><tr><td align="left"> ▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>result1</code></em>:</td><td align="left"><span class="type">type1</span></td></tr><tr><td align="left"><em class="parameter"><code>result2</code></em>:</td><td align="left"><span class="type">type2</span></td></tr><tr><td align="left"> ...</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>resultM</code></em>:</td><td align="left"><span class="type">typeM</span></td></tr><tr><td align="left">Errors:</td><td align="left"><span class="errorname">kind1</span>, <span class="errorname">kind2</span> ..., <span class="errorname">kindK</span></td></tr></tbody></table></div><p>
    Description
  </p></blockquote></div><p>
</p><p>
If a request does not generate a reply, the ▶ and result lines are
omitted.  If a request may generate multiple replies, the ▶ is replaced by
a ▶+.  In the authorization data exchanges in the initial connection setup
and the CreateAC request, ◀ indicates data sent by the client in response
to data sent by the server.
</p><p>
The protocol begins with the establishment of a connection over a
mutually-understood virtual stream:
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:open_connection"></a>open connection</h3></div></div></div><a id="idm1336" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>byte-order</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">BYTE</span></a></td></tr><tr><td align="left"><em class="parameter"><code>client-major-protocol-version</code></em>:</td><td align="left"><span class="type">CARD16</span></td></tr><tr><td align="left"><em class="parameter"><code>client-minor-protocol-version</code></em>:</td><td align="left"><span class="type">CARD16</span></td></tr><tr><td align="left"><em class="parameter"><code>authorization-protocols</code></em>:</td><td align="left"><a class="link" href="#Data_Types:AUTH" title="AUTH"><span class="type">LISTofAUTH</span></a></td></tr></tbody></table></div><p>
The initial byte of the connection specifies the
<em class="parameter"><code>BYTE-ORDER</code></em> in
which subsequent 16-bit and 32-bit numeric values are to be
transmitted.  The octal value <code class="literal">102</code>
(<acronym class="acronym">ASCII</acronym> uppercase <span class="quote">“<span class="quote"><code class="literal">B</code></span>”</span>)
indicates that the most-significant byte is to be transmitted
first; the octal value <code class="literal">154</code>
(<acronym class="acronym">ASCII</acronym> lowercase <span class="quote">“<span class="quote"><code class="literal">l</code></span>”</span>)
indicates that the least-significant byte is to be transmitted first.
If any other value is encountered the server closes the
connection without any response.
</p><p>
The <em class="parameter"><code>CLIENT-MAJOR-PROTOCOL-VERSION</code></em> and
<em class="parameter"><code>CLIENT-MINOR-PROTOCOL-VERSION</code></em> specify
which version of the
font service protocol the client would like to use.  If the
client can support multiple versions, the highest version
should be given.  This version of the protocol has a
major version of 2 and a minor version of 0.
  </p><p>
The <em class="parameter"><code>AUTHORIZATION-PROTOCOLS</code></em>
contains a list of protocol names and
optional initial data for which the client can provide
information.  The server may use this to determine which
protocol to use or as part of the initial exchange of
authorization data.
  </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>status</code></em>:</td><td align="left">{ <code class="constant">Success</code>, <code class="constant">Continue</code>,
                                  <code class="constant">Busy</code>, <code class="constant">Denied</code> }</td></tr><tr><td align="left"><em class="parameter"><code>server-major-protocol-version</code></em>:</td><td align="left"><span class="type">CARD16</span></td></tr><tr><td align="left"><em class="parameter"><code>server-minor-protocol-version</code></em>:</td><td align="left"><span class="type">CARD16</span></td></tr><tr><td align="left"><em class="parameter"><code>alternate-servers-hint</code></em>:</td><td align="left"><a class="link" href="#Data_Types:ALTERNATESERVER" title="ALTERNATESERVER"><span class="type">LISTofALTERNATESERVER</span></a></td></tr><tr><td align="left"><em class="parameter"><code>authorization-index</code></em>:</td><td align="left"><span class="type">CARD8</span></td></tr><tr><td align="left"><em class="parameter"><code>authorization-data</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">LISTofBYTE</span></a></td></tr></tbody></table></div><p>
The <em class="parameter"><code>SERVER-MAJOR-PROTOCOL-VERSION</code></em> and
<em class="parameter"><code>SERVER-MINOR-PROTOCOL-VERSION</code></em> specify
the version of the font
service protocol that the server expects from the client.  If
the server supports the version specified by the client, this
version number should be returned.  If the client has
requested a higher version than is supported by the server,
the server's highest version should be returned.  Otherwise,
if the client has requested a lower version than is supported
by the server, the server's lowest version should be returned.
It is the client's responsibility to decide whether or not it
can match this version of the protocol.
  </p><p>
The <em class="parameter"><code>ALTERNATE-SERVERS-HINT</code></em>
is a list of other font servers
that may have related sets of fonts (determined by means
outside this protocol, typically by the system administrator).
Clients may choose to contact these font servers if the
connection is rejected or lost.
  </p><p>
The <em class="parameter"><code>STATUS</code></em> field indicates whether the server accepted,
rejected, or would like more information about the connection.
It has one of the following alternate values:
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><code class="constant">Success</code></td><td align="left"><code class="literal">0</code></td></tr><tr><td align="left"><code class="constant">Continue</code></td><td align="left"><code class="literal">1</code></td></tr><tr><td align="left"><code class="constant">Busy</code></td><td align="left"><code class="literal">2</code></td></tr><tr><td align="left"><code class="constant">Denied</code></td><td align="left"><code class="literal">3</code></td></tr></tbody></table></div><p>
  </p><p>
If <em class="parameter"><code>STATUS</code></em> is <code class="constant">Denied</code>,
the server has rejected the client's authorization information.
If <em class="parameter"><code>STATUS</code></em> is <code class="constant">Busy</code>, the server has
simply decided that it cannot provide fonts to this client at
this time (it may be able to at a later time).  In both cases,
<em class="parameter"><code>AUTHORIZATION-INDEX</code></em> is set to zero,
no authorization-data is
returned, and the server closes the connection after sending
the data described so far.
  </p><p>
Otherwise the <em class="parameter"><code>AUTHORIZATION-INDEX</code></em> is set to the index
(beginning with 1) into the <em class="parameter"><code>AUTHORIZATION-PROTOCOLS</code></em>
list of the protocol that the server will use for this connection.  If
the server does not want to use any of the given protocols,
this value is set to zero.  The <em class="parameter"><code>AUTHORIZATION-DATA</code></em>
field is used to send back authorization protocol-dependent data to the
client (such as a challenge, authentication of the server,
etc.).
  </p><p>
If <em class="parameter"><code>STATUS</code></em> is <code class="constant">Success</code>,
the following section of protocol is omitted.  Otherwise, if
<em class="parameter"><code>STATUS</code></em> is <code class="constant">Continue</code>,
the server expects
more authorization data from the client (i.e. the connection
setup is not finished, so no requests or events may be sent):
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left">◀</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>more-authorization-data</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>status</code></em>:</td><td align="left">{ <code class="constant">Success</code>, <code class="constant">Continue</code>, <code class="constant">Busy</code>, <code class="constant">Denied</code> }</td></tr><tr><td align="left"><em class="parameter"><code>more-authorization-data</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">LISTofBYTE</span></a></td></tr></tbody></table></div><p>
</p><p>
The values in <em class="parameter"><code>STATUS</code></em> have the same meanings as described
above.  This section of protocol is repeated until the server
either accepts (sets <em class="parameter"><code>STATUS</code></em> to
<code class="constant">Success</code>) or rejects (sets <em class="parameter"><code>STATUS</code></em>
to <code class="constant">Denied</code> or <code class="constant">Busy</code>) the connection.
</p><p>
Once the connection has been accepted and <em class="parameter"><code>STATUS</code></em>
is <code class="constant">Success</code>,
an implicit AccessContext is created for the authorization
data and the protocol continues with the following data sent
from the server:
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>remaining-length</code></em>:</td><td align="left"><span class="type">CARD32</span></td></tr><tr><td align="left"><em class="parameter"><code>maximum-request-length</code></em>:</td><td align="left"><span class="type">CARD16</span></td></tr><tr><td align="left"><em class="parameter"><code>release-number</code></em>:</td><td align="left"><span class="type">CARD32</span></td></tr><tr><td align="left"><em class="parameter"><code>vendor</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr></tbody></table></div><p>
</p><p>
The <em class="parameter"><code>REMAINING-LENGTH</code></em> specifies the length in 4-byte
units of the remaining data to be transmitted to the client.  The
<em class="parameter"><code>MAXIMUM-REQUEST-LENGTH</code></em> specifies the largest request
size in 4-byte units that is accepted by the server and must have a
value of at least 4096.  Requests with a length field larger
than this value are ignored and a
<a class="link" href="#Errors:Length" title="Length"><span class="errorname">Length</span></a>
error is returned.
The <em class="parameter"><code>VENDOR</code></em> string specifies the name of the
manufacturer of the font server.  The
<em class="parameter"><code>RELEASE-NUMBER</code></em> specifies the particular
release of the server in a manufacturer-dependent manner.
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="idm1543"></a></h3></div></div></div><p>
After the connection is established and the setup information has been
exchanged, the client may issue any of requests described below:
</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:NoOp"></a><code class="function">NoOp</code></h3></div></div></div><a id="idm1549" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request does nothing.  It is typically used in response
to a
<a class="link" href="#Events:KeepAlive" title="KeepAlive"><code class="function">KeepAlive</code></a>
event.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:ListExtensions"></a><code class="function">ListExtensions</code></h3></div></div></div><a id="idm1567" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>names</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">LISTofSTRING8</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request returns the names of the extension packages
that are supported by the server.  Extension names are
case-sensitive and are encoded in <acronym class="acronym">ISO</acronym> 8859-1.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:QueryExtension"></a><code class="function">QueryExtension</code></h3></div></div></div><a id="idm1592" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>name</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>present</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr><tr><td align="left"><em class="parameter"><code>major-version</code></em>:</td><td align="left"><span class="type">CARD16</span></td></tr><tr><td align="left"><em class="parameter"><code>minor-version</code></em>:</td><td align="left"><span class="type">CARD16</span></td></tr><tr><td align="left"><em class="parameter"><code>major-opcode</code></em>:</td><td align="left"><span class="type">CARD8</span></td></tr><tr><td align="left"><em class="parameter"><code>first-event</code></em>:</td><td align="left"><span class="type">CARD8</span></td></tr><tr><td align="left"><em class="parameter"><code>number-events</code></em>:</td><td align="left"><span class="type">CARD8</span></td></tr><tr><td align="left"><em class="parameter"><code>first-error</code></em>:</td><td align="left"><span class="type">CARD8</span></td></tr><tr><td align="left"><em class="parameter"><code>number-errors</code></em>:</td><td align="left"><span class="type">CARD8</span></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request determines whether or not the extension package specified by
<em class="parameter"><code>NAME</code></em> (encoded in <acronym class="acronym">ISO</acronym> 8859-1) is
supported by the server and that there is sufficient number of major opcode,
event, and error codes available.  If so, then <em class="parameter"><code>PRESENT</code></em>
is set to <code class="constant">True</code>, <em class="parameter"><code>MAJOR-VERSION</code></em>
and <em class="parameter"><code>MINOR-VERSION</code></em> are set to the
respective major and minor version numbers of the protocol
that the server would prefer; <em class="parameter"><code>MAJOR-OPCODE</code></em> is set to
the value to use in extension requests; <em class="parameter"><code>FIRST-EVENT</code></em>
is set to the value of the first extension-specific event code or zero if the
extension does not have any events; <em class="parameter"><code>NUMBER-EVENTS</code></em> is
set to the number of new events that the event defines;
<em class="parameter"><code>FIRST-ERROR</code></em>
is set to the value of the first extension-specific error code
or zero if the extension does not define any new errors; and
<em class="parameter"><code>NUMBER-ERRORS</code></em> is set to the number of
new errors the extension defines.
  </p><p>
Otherwise, <em class="parameter"><code>PRESENT</code></em> is set to
<code class="constant">False</code> and the remaining fields are
set to zero.
  </p><p>
The server is free to return different values to different
clients.  Therefore, clients must use this request before
issuing any of the requests in the named extension package or
using the
<a class="link" href="#Requests:SetEventMask" title="SetEventMask"><code class="function">SetEventMask</code></a> request to express interest in any of
this extension's events.  Otherwise, a
<a class="link" href="#Errors:Request" title="Request"><span class="errorname">Request</span></a>
error is returned.
  </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:ListCatalogues"></a><code class="function">ListCatalogues</code></h3></div></div></div><a id="idm1676" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>pattern</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left"><em class="parameter"><code>max-names</code></em>:</td><td align="left"><span class="type">CARD32</span></td></tr><tr><td align="left">▶+</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>replies-following-hint</code></em>:</td><td align="left"><span class="type">CARD32</span></td></tr><tr><td align="left"><em class="parameter"><code>names</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">LISTofSTRING8</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request returns a list of at most <em class="parameter"><code>MAX-NAMES</code></em> names
of collections (called catalogues) of fonts that match
the specified <em class="parameter"><code>PATTERN</code></em>.  In the pattern (which is encoded
in <acronym class="acronym">ISO</acronym> 8859-1), the
<span class="quote">“<span class="quote"><code class="literal">?</code></span>”</span> character (octal <code class="literal">77</code>)
matches any single character; the
<span class="quote">“<span class="quote"><code class="literal">*</code></span>”</span> character (octal <code class="literal">52</code>)
matches any series of zero or more characters; and alphabetic
characters match either upper- or lowercase.  The
returned <em class="parameter"><code>NAMES</code></em> are encoded in
<acronym class="acronym">ISO</acronym> 8859-1 and may contain
mixed character cases.
    </p><p>
If <em class="parameter"><code>PATTERN</code></em> is of zero length or
<em class="parameter"><code>MAX-NAMES</code></em> is equal to zero,
one reply containing a zero-length list of names is returned.
This may be used to synchronize the client with the server.
    </p><p>
Servers are free to add or remove catalogues to the set returned by
<code class="function">ListCatalogues</code>
between any two requests.  This request is not
cumulative; repeated uses are processed in isolation and do
result in an iteration through the list.
    </p><p>
To reduce the amount of buffering needed by the server, the
list of names may be split across several reply packets, so
long as the names arrive in the same order that they would
have appeared had they been in a single packet.  The
<em class="parameter"><code>REPLIES-FOLLOWING-HINT</code></em> field in all but the last reply
contains a positive value that specifies the number of
replies that are likely, but not required, to follow.  In the
last reply, which may contain zero or more names, this field
is set to zero.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:SetCatalogues"></a><code class="function">SetCatalogues</code></h3></div></div></div><a id="idm1734" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>names</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">LISTofSTRING8</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a>,
<a class="link" href="#Errors:Name" title="Name"><span class="errorname">Name</span></a></td></tr></tbody></table></div><p>
This request sets the list of catalogues whose fonts should be
visible to the client.  The union of the fonts provided by
each of the named catalogues forms the set of fonts whose
names match patterns in
<a class="link" href="#Requests:ListFonts" title="ListFonts"><code class="function">ListFonts</code></a>,
<a class="link" href="#Requests:ListFontsWithXInfo" title="ListFontsWithXInfo"><code class="function">ListFontsWithXInfo</code></a>,
and
<a class="link" href="#Requests:OpenBitmapFont" title="OpenBitmapFont"><code class="function">OpenBitmapFont</code></a>
requests.  The catalogue names are
case-insensitive and are encoded in <acronym class="acronym">ISO</acronym> 8859-1.  A zero-length
list resets the client's catalogue list to the
server-dependent default.
    </p><p>
If any of the catalogue names are invalid, a
<a class="link" href="#Errors:Name" title="Name"><span class="errorname">Name</span></a>
error is returned and the request is ignored.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:GetCatalogues"></a><code class="function">GetCatalogues</code></h3></div></div></div><a id="idm1768" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>names</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">LISTofSTRING8</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request returns the current list of catalogue names
(encoded in <acronym class="acronym">ISO</acronym> 8859-1) associated with the client.  These
catalogues determine the set of fonts that are visible
to
<a class="link" href="#Requests:ListFonts" title="ListFonts"><code class="function">ListFonts</code></a>,
<a class="link" href="#Requests:ListFontsWithXInfo" title="ListFontsWithXInfo"><code class="function">ListFontsWithXInfo</code></a>,
and
<a class="link" href="#Requests:OpenBitmapFont" title="OpenBitmapFont"><code class="function">OpenBitmapFont</code></a>.
A zero-length list indicates the server's default set of
fonts.  Catalogue names are case-insensitive and may be
returned in mixed case.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:SetEventMask"></a><code class="function">SetEventMask</code></h3></div></div></div><a id="idm1799" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>extension-opcode</code></em>:</td><td align="left"><span class="type">CARD8</span></td></tr><tr><td align="left"><em class="parameter"><code>event-mask</code></em>:</td><td align="left"><a class="link" href="#Data_Types:EVENTMASK" title="EVENTMASK"><span class="type">EVENTMASK</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:EventMask" title="EventMask"><span class="errorname">EventMask</span></a>,
<a class="link" href="#Errors:Request" title="Request"><span class="errorname">Request</span></a></td></tr></tbody></table></div><p>
This request specifies the set of maskable events that the
extension indicated by <em class="parameter"><code>EXTENSION-OPCODE</code></em>
(or zero for the core)
should generate for the client.  Event masks are limited in
scope to the extension (or core) for which they are defined,
so expressing interest in events from one or more extensions
requires multiple uses of this request.
    </p><p>
The default event mask if
<code class="function">SetEventMask</code>
has not been called
is zero, indicating no interest in any maskable events.
Some events are not maskable and cannot be blocked.
    </p><p>
If <em class="parameter"><code>EXTENSION-OPCODE</code></em> is not a valid extension
opcode previously returned by
<a class="link" href="#Requests:QueryExtension" title="QueryExtension"><code class="function">QueryExtension</code></a>
or zero, a
<a class="link" href="#Errors:Request" title="Request"><span class="errorname">Request</span></a>
error is
returned.  If <em class="parameter"><code>EVENT-MASK</code></em> contains any bits that do not
correspond to valid events for the specified extension (or
core), an
<a class="link" href="#Errors:EventMask" title="EventMask"><span class="errorname">EventMask</span></a>
error is returned and the request is
ignored.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:GetEventMask"></a><code class="function">GetEventMask</code></h3></div></div></div><a id="idm1840" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>extension-opcode</code></em>:</td><td align="left"><span class="type">CARD8</span></td></tr><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>event-mask</code></em>:</td><td align="left"><a class="link" href="#Data_Types:EVENTMASK" title="EVENTMASK"><span class="type">EVENTMASK</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Request" title="Request"><span class="errorname">Request</span></a></td></tr></tbody></table></div><p>
This request returns the set of maskable core events the
extension indicated by <em class="parameter"><code>EXTENSION-OPCODE</code></em>
(or the core if zero)
should generate for the client.  Non-maskable events are
always sent to the client.
    </p><p>
If <em class="parameter"><code>EXTENSION-OPCODE</code></em> is not a valid extension opcode
previously returned by
<a class="link" href="#Requests:QueryExtension" title="QueryExtension"><code class="function">QueryExtension</code></a>
or zero, a
<a class="link" href="#Errors:Request" title="Request"><span class="errorname">Request</span></a>
error is returned.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:CreateAC"></a><code class="function">CreateAC</code></h3></div></div></div><a id="idm1876" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>ac</code></em>:</td><td align="left"><a class="link" href="#Data_Types:ACCESSCONTEXT" title="ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a></td></tr><tr><td align="left"><em class="parameter"><code>authorization-protocols</code></em>:</td><td align="left"><a class="link" href="#Data_Types:AUTH" title="AUTH"><span class="type">LISTofAUTH</span></a></td></tr><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>status</code></em>:</td><td align="left">{ <code class="constant">Success</code>, <code class="constant">Continue</code>, <code class="constant">Denied</code> }</td></tr><tr><td align="left"><em class="parameter"><code>authorization-index</code></em>:</td><td align="left"><span class="type">CARD8</span></td></tr><tr><td align="left"><em class="parameter"><code>authorization-data</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">LISTofBYTE</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:IDChoice" title="IDChoice"><span class="errorname">IDChoice</span></a></td></tr></tbody></table></div><p>
This request creates a new
<span class="type">AccessContext</span>
object within the
server containing the specified authorization data.  When
this
<span class="type">AccessContext</span>
is selected by the client using the
<a class="link" href="#Requests:SetAuthorization" title="SetAuthorization"><code class="function">SetAuthorization</code></a>
request, the data may be used by the server
to determine whether or not the client should be granted
access to particular font information.
    </p><p>
If <em class="parameter"><code>STATUS</code></em> is <code class="constant">Denied</code>, the server
rejects the client's authorization information and does not associate
<em class="parameter"><code>AC</code></em> with any valid <span class="type">AccessContext</span>.
In this case, <em class="parameter"><code>AUTHORIZATION-INDEX</code></em> is set
to zero, and zero bytes of <em class="parameter"><code>AUTHORIZATION-DATA</code></em>
is returned.
    </p><p>
Otherwise, <em class="parameter"><code>AUTHORIZATION-INDEX</code></em> is set to the index
(beginning with 1) into the <em class="parameter"><code>AUTHORIZATION-PROTOCOLS</code></em>
list of the protocol
that the server will use for this connection.  If the server
does not want to use any of the given protocols, this value is
set to zero.  The <em class="parameter"><code>AUTHORIZATION-DATA</code></em> field is used
to send back authorization protocol-dependent data to the client (such
as a challenge, authentication of the server, etc.).
    </p><p>
If <em class="parameter"><code>STATUS</code></em> is <code class="constant">Continue</code>,
the client is expected to continue
the request by sending the following protocol and receiving
the indicated response from the server.  This continues
until <em class="parameter"><code>STATUS</code></em> is set to either
<code class="constant">Success</code> or <code class="constant">Denied</code>.
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left">     ◀</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>     more-authorization-data</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left">     ▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>status</code></em>:</td><td align="left">{ <code class="constant">Success</code>, <code class="constant">Continue</code>, <code class="constant">Denied</code> }</td></tr><tr><td align="left"><em class="parameter"><code>    more-authorization-data</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">LISTofBYTE</span></a></td></tr></tbody></table></div><p>
Once the connection has been accepted and <em class="parameter"><code>STATUS</code></em>
is <code class="constant">Success</code>, the request is complete.
    </p><p>
If <em class="parameter"><code>AC</code></em> is not in the range
[1..2<sup>29</sup>-1] or is already associated
with an access context, an <a class="link" href="#Errors:IDChoice" title="IDChoice"><span class="errorname">IDChoice</span></a> error is returned.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:FreeAC"></a><code class="function">FreeAC</code></h3></div></div></div><a id="idm1981" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>ac</code></em>:</td><td align="left"><a class="link" href="#Data_Types:ACCESSCONTEXT" title="ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:AccessContext" title="AccessContext"><span class="errorname">AccessContext</span></a>,
<a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request indicates that the specified <em class="parameter"><code>AC</code></em> should
no longer be associated with a valid access context.
If <em class="parameter"><code>AC</code></em> is also the current
<span class="type">AccessContext</span>
(as set by the
<a class="link" href="#Requests:SetAuthorization" title="SetAuthorization"><code class="function">SetAuthorization</code></a>
request), an implicit
<a class="link" href="#Requests:SetAuthorization" title="SetAuthorization"><code class="function">SetAuthorization</code></a>
of <code class="constant">None</code> is done to
restore the
<span class="type">AccessContext</span>
established for the initial
connection setup.  Operations on fonts that were opened under
<em class="parameter"><code>AC</code></em> are not affected.  The client may reuse the
value of <em class="parameter"><code>AC</code></em> in a subsequent
<a class="link" href="#Requests:CreateAC" title="CreateAC"><code class="function">CreateAC</code></a>
request.
    </p><p>
If <em class="parameter"><code>AC</code></em> isn't associated with any valid authorization
previously created by
<a class="link" href="#Requests:CreateAC" title="CreateAC"><code class="function">CreateAC</code></a>, an
<a class="link" href="#Errors:AccessContext" title="AccessContext"><span class="errorname">AccessContext</span></a>
error is returned.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:SetAuthorization"></a><code class="function">SetAuthorization</code></h3></div></div></div><a id="idm2024" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>ac</code></em>:</td><td align="left"><a class="link" href="#Data_Types:ACCESSCONTEXT" title="ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:AccessContext" title="AccessContext"><span class="errorname">AccessContext</span></a></td></tr></tbody></table></div><p>
This request sets the
<span class="type">AccessContext</span>
to be used for subsequent
requests (except for
<a class="link" href="#Requests:QueryXInfo" title="QueryXInfo"><code class="function">QueryXInfo</code></a>,
<a class="link" href="#Requests:QueryXExtents8" title="QueryXExtents8"><code class="function">QueryXExtents8</code></a>,
<a class="link" href="#Requests:QueryXExtents16" title="QueryXExtents16"><code class="function">QueryXExtents16</code></a>,
<a class="link" href="#Requests:QueryXBitmaps8" title="QueryXBitmaps8"><code class="function">QueryXBitmaps8</code></a>,
<a class="link" href="#Requests:QueryXBitmaps16" title="QueryXBitmaps16"><code class="function">QueryXBitmaps16</code></a>
and
<a class="link" href="#Requests:CloseFont" title="CloseFont"><code class="function">CloseFont</code></a>
which are done under the
<span class="type">AccessContext</span>
of the
corresponding
<a class="link" href="#Requests:OpenBitmapFont" title="OpenBitmapFont"><code class="function">OpenBitmapFont</code></a>
).
An <em class="parameter"><code>AC</code></em> of <code class="constant">None</code> restores the
<span class="type">AccessContext</span>
established for the initial connection setup.
    </p><p>
If <em class="parameter"><code>AC</code></em> is neither <code class="constant">None</code>
nor a value associated with a valid <span class="type">AccessContext</span>
previously created by
<a class="link" href="#Requests:CreateAC" title="CreateAC"><code class="function">CreateAC</code></a>,
an
<a class="link" href="#Errors:AccessContext" title="AccessContext"><span class="errorname">AccessContext</span></a>
error is returned.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:SetResolution"></a><code class="function">SetResolution</code></h3></div></div></div><a id="idm2073" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>resolutions</code></em>:</td><td align="left"><a class="link" href="#Data_Types:RESOLUTION" title="RESOLUTION"><span class="type">LISTofRESOLUTION</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Resolution" title="Resolution"><span class="errorname">Resolution</span></a>,
<a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request provides a hint as to the resolution and
preferred point size of the drawing surfaces for which the
client will be requesting fonts.  The server may use this
information to set the RESOLUTION_X and RESOLUTION_Y fields
of scalable <acronym class="acronym">XLFD</acronym> font names, to order sets of names based on
their resolutions, and to choose the server-dependent
instance that is used when a partially-specified scalable
fontname is opened.
    </p><p>
If a zero-length list of <a class="link" href="#Data_Types:RESOLUTION" title="RESOLUTION"><span class="type">RESOLUTION</span></a>s is given, the
server-dependent default value is restored.  Otherwise, if
elements of all of the specified <a class="link" href="#Data_Types:RESOLUTION" title="RESOLUTION"><span class="type">RESOLUTION</span></a>s are non-zero, the
default resolutions for this client are changed.
    </p><p>
If a <a class="link" href="#Data_Types:RESOLUTION" title="RESOLUTION"><span class="type">RESOLUTION</span></a> entry contains a zero,
a <a class="link" href="#Errors:Resolution" title="Resolution"><span class="errorname">Resolution</span></a> error is
returned and the default resolutions are not changed.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:GetResolution"></a><code class="function">GetResolution</code></h3></div></div></div><a id="idm2108" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>resolutions</code></em>:</td><td align="left"><a class="link" href="#Data_Types:RESOLUTION" title="RESOLUTION"><span class="type">LISTofRESOLUTION</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request returns the current list of default resolutions.
If a client has not performed a
<a class="link" href="#Requests:SetResolution" title="SetResolution"><code class="function">SetResolution</code></a>,
a server-dependent default value is returned.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:ListFonts"></a><code class="function">ListFonts</code></h3></div></div></div><a id="idm2134" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>pattern</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left"><em class="parameter"><code>max-names</code></em>:</td><td align="left"><span class="type">CARD32</span></td></tr><tr><td align="left">▶+</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>replies-following-hint</code></em>:</td><td align="left"><span class="type">CARD32</span></td></tr><tr><td align="left"><em class="parameter"><code>names</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">LISTofSTRING8</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request returns a list of at most <em class="parameter"><code>MAX-NAMES</code></em>
font names that match the specified <em class="parameter"><code>PATTERN</code></em>,
according to matching rules
of the <span class="olink"><em class="citetitle">X Logical
Font Description Conventions</em></span>
<a class="xref" href="#References:xlfd-spec" title="X Logical Font Description Conventions, Version 1.5">[<abbr class="abbrev">3</abbr>]</a>.
In the pattern (which is encoded in <acronym class="acronym">ISO</acronym> 8859-1) the
<span class="quote">“<span class="quote"><code class="literal">?</code></span>”</span> character (octal <code class="literal">77</code>)
matches any single character; the
<span class="quote">“<span class="quote"><code class="literal">*</code></span>”</span> character (octal <code class="literal">52</code>)
matches any series of zero or more characters; and
alphabetic characters match either upper- or lowercase.  The
returned <em class="parameter"><code>NAMES</code></em> are encoded in
<acronym class="acronym">ISO</acronym> 8859-1 and may contain mixed
character cases.  Font names are not required to be in <acronym class="acronym">XLFD</acronym>
format.
    </p><p>
If <em class="parameter"><code>PATTERN</code></em> is of zero length or
<em class="parameter"><code>MAX-NAMES</code></em> is equal to zero,
one reply containing a zero-length list of names is returned.
This may be used to synchronize the client with the server.
    </p><p>
Servers are free to add or remove fonts to the set returned by
<code class="function">ListFonts</code>
between any two requests.  This request is not
cumulative; repeated uses are processed in isolation and do
result in an iteration through the list.
    </p><p>
To reduce the amount of buffering needed by the server, the
list of names may be split across several reply packets, so
long as the names arrive in the same order that they would
have appeared had they been in a single packet.  The
<em class="parameter"><code>REPLIES-FOLLOWING-HINT</code></em> field in all but the last reply
contains a positive value that specifies the number of
replies that are likely, but not required, to follow.  In the
last reply, which may contain zero or more names, this field
is set to zero.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:ListFontsWithXInfo"></a><code class="function">ListFontsWithXInfo</code></h3></div></div></div><a id="idm2196" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>pattern</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left"><em class="parameter"><code>pattern</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left"><em class="parameter"><code>pattern</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left"><em class="parameter"><code>max-names</code></em>:</td><td align="left"><span class="type">CARD32</span></td></tr><tr><td align="left">▶+</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>replies-following-hint</code></em>:</td><td align="left"><span class="type">CARD32</span></td></tr><tr><td align="left"><em class="parameter"><code>info</code></em>:</td><td align="left"><a class="link" href="#Data_Types:XFONTINFO" title="XFONTINFO"><span class="type">XFONTINFO</span></a></td></tr><tr><td align="left"><em class="parameter"><code>name</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request is similar to
<a class="link" href="#Requests:ListFonts" title="ListFonts"><code class="function">ListFonts</code></a>
except that a separate
reply containing the name, header, and property data is
generated for each matching font name.  Following these
replies, if any, a final reply containing a zero-length
<em class="parameter"><code>NAME</code></em> and no <em class="parameter"><code>INFO</code></em> is sent.
    </p><p>
The <em class="parameter"><code>REPLIES-FOLLOWING-HINT</code></em> field in all but the
last reply contains a positive value that specifies the number of replies
that are likely, but not required, to follow.  In the last
reply, this field is set to zero.
    </p><p>
If <em class="parameter"><code>PATTERN</code></em> is of zero length or if
<em class="parameter"><code>MAX-NAMES</code></em> is equal to zero, only the final reply
containing a zero-length <em class="parameter"><code>NAME</code></em> and no
<em class="parameter"><code>INFO</code></em> is returned. This may be used to synchronize the
client with the server.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:OpenBitmapFont"></a><code class="function">OpenBitmapFont</code></h3></div></div></div><a id="idm2265" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>fontid</code></em>:</td><td align="left"><a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a></td></tr><tr><td align="left"><em class="parameter"><code>pattern</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left"><em class="parameter"><code>format-mask</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BITMAPFORMATMASK" title="BITMAPFORMATMASK"><span class="type">BITMAPFORMATMASK</span></a></td></tr><tr><td align="left"><em class="parameter"><code>format-hint</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BITMAPFORMAT" title="BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a></td></tr><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>otherid</code></em>:</td><td align="left"><a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a> or <code class="constant">None</code></td></tr><tr><td align="left"><em class="parameter"><code>otherid-valid</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr><tr><td align="left"><em class="parameter"><code>cachable</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr><tr><td align="left">Errors:</td><td align="left">
<a class="link" href="#Errors:IDChoice" title="IDChoice"><span class="errorname">IDChoice</span></a>,
<a class="link" href="#Errors:Name" title="Name"><span class="errorname">Name</span></a>,
<a class="link" href="#Errors:Format" title="Format"><span class="errorname">Format</span></a>,
<a class="link" href="#Errors:AccessContext" title="AccessContext"><span class="errorname">AccessContext</span></a>,
<a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request looks for a server-dependent choice of the
font names that match the specified <em class="parameter"><code>PATTERN</code></em>
according to the rules described for
<a class="link" href="#Requests:ListFonts" title="ListFonts"><code class="function">ListFonts</code></a>.
If no matches are found, a
<a class="link" href="#Errors:Name" title="Name"><span class="errorname">Name</span></a>
error is returned.  Otherwise, the server attempts to
open the font associated with the chosen name.
    </p><p>
Permission to access the font is determined by the server
according the licensing policy used for this font.  The server
may use the client's current
<span class="type">AccessContext</span>
(as set by the most
recent
<a class="link" href="#Requests:SetAuthorization" title="SetAuthorization"><code class="function">SetAuthorization</code></a>
request or the original connection
setup) to determine any client-specific sets of permissions.
After the font has been opened, the client is allowed to
specify a new
<span class="type">AccessContext</span>
with
<a class="link" href="#Requests:SetAuthorization" title="SetAuthorization"><code class="function">SetAuthorization</code></a>
or release
the
<span class="type">AccessContext</span>
using
<a class="link" href="#Requests:FreeAC" title="FreeAC"><code class="function">FreeAC</code></a>
.  Subsequent
<a class="link" href="#Requests:QueryXInfo" title="QueryXInfo"><code class="function">QueryXInfo</code></a>,
<a class="link" href="#Requests:QueryXExtents8" title="QueryXExtents8"><code class="function">QueryXExtents8</code></a>,
<a class="link" href="#Requests:QueryXExtents16" title="QueryXExtents16"><code class="function">QueryXExtents16</code></a>,
<a class="link" href="#Requests:QueryXBitmaps8" title="QueryXBitmaps8"><code class="function">QueryXBitmaps8</code></a>,
<a class="link" href="#Requests:QueryXBitmaps16" title="QueryXBitmaps16"><code class="function">QueryXBitmaps16</code></a>
and
<a class="link" href="#Requests:CloseFont" title="CloseFont"><code class="function">CloseFont</code></a>
requests on this <a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a> are
performed according to permissions granted at the time of the
<code class="function">OpenBitmapFont</code>
request.
    </p><p>
If the server is willing and able to detect that the client
has already opened the font successfully (possibly under a
different name), the <em class="parameter"><code>OTHERID</code></em> field
may be set to one of the
identifiers previously used to open the font.  The
<em class="parameter"><code>OTHERID-VALID</code></em> field indicates whether or not
<em class="parameter"><code>OTHERID</code></em> is still associated with an open font:
if it is <code class="constant">True</code>, the client may use
<em class="parameter"><code>OTHERID</code></em> as an alternative to
<em class="parameter"><code>FONTID</code></em>. Otherwise, if
<em class="parameter"><code>OTHERID-VALID</code></em> is <code class="constant">False</code>,
<em class="parameter"><code>OTHERID</code></em> is no longer
open but has not been reused by a subsequent
<code class="function">OpenBitmapFont</code>
request.
    </p><p>
If <em class="parameter"><code>OTHERID</code></em> is set to <code class="constant">None</code>,
then <em class="parameter"><code>OTHERID-VALID</code></em> should be set
to <code class="constant">False</code>.
    </p><p>
The <em class="parameter"><code>FORMAT-MASK</code></em> indicates which fields in
<em class="parameter"><code>FORMAT-HINT</code></em>
the client is likely to use in subsequent
<code class="function">GetXBitmaps8</code>
and
<code class="function">GetXBitmaps16</code>
requests.  Servers may wish to use
this information to precompute certain values.
    </p><p>
If <em class="parameter"><code>CACHABLE</code></em> is set to <code class="constant">True</code>,
the client may cache the font
(so that redundant opens of the same font may be avoided)
and use it with all
<span class="type">AccessContext</span>s
during the life of the
client without violating the font's licensing policy.  This
flag is typically set whenever a font is unlicensed or is
licensed on a per-display basis.  If <em class="parameter"><code>CACHABLE</code></em>
is <code class="constant">False</code>, the
client should reopen the font for each
<span class="type">AccessContext</span>.
    </p><p>
The server is permitted to add to or remove from the set of
fonts returned by
<a class="link" href="#Requests:ListFonts" title="ListFonts"><code class="function">ListFonts</code></a>
between any two requests, though
mechanisms outside the protocol.  Therefore, it is possible
for this request (which is atomic) to return a different font
than would result from separate a
<a class="link" href="#Requests:ListFonts" title="ListFonts"><code class="function">ListFonts</code></a>
followed by an
<code class="function">OpenBitmapFont</code>
with a non-wildcarded font name.
    </p><p>
If <em class="parameter"><code>FONTID</code></em> is not in the range
[1..2<sup>29</sup>-1] or if it is already
associated with an open font, an
<a class="link" href="#Errors:IDChoice" title="IDChoice"><span class="errorname">IDChoice</span></a>
error is returned.
If no font is available that matches the specified
<em class="parameter"><code>PATTERN</code></em>, a
<a class="link" href="#Errors:Name" title="Name"><span class="errorname">Name</span></a>
error is returned.  If the font is present but the client
is not permitted access, an
<a class="link" href="#Errors:AccessContext" title="AccessContext"><span class="errorname">AccessContext</span></a>
error is returned.
If <em class="parameter"><code>FORMAT-MASK</code></em> has any unspecified bits set or if any
of the fields in <em class="parameter"><code>FORMAT-HINT</code></em> indicated by
<em class="parameter"><code>FORMAT-MASK</code></em> are invalid, a
<a class="link" href="#Errors:Format" title="Format"><span class="errorname">Format</span></a>
error is returned.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:QueryXInfo"></a><code class="function">QueryXInfo</code></h3></div></div></div><a id="idm2413" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>fontid</code></em>:</td><td align="left"><a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a></td></tr><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>info</code></em>:</td><td align="left"><a class="link" href="#Data_Types:XFONTINFO" title="XFONTINFO"><span class="type">XFONTINFO</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Font" title="Font"><span class="errorname">Font</span></a>,
<a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request returns the font header and property information
for the open font associated with <em class="parameter"><code>FONTID</code></em>.
    </p><p>
If <em class="parameter"><code>FONTID</code></em> is not associated with any open fonts, a
<a class="link" href="#Errors:Font" title="Font"><span class="errorname">Font</span></a>
error
is returned.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:QueryXExtents8"></a><code class="function">QueryXExtents8</code></h3></div></div></div><a id="idm2450" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>fontid</code></em>:</td><td align="left"><a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a></td></tr><tr><td align="left"><em class="parameter"><code>range</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr><tr><td align="left"><em class="parameter"><code>chars</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>extents</code></em>:</td><td align="left"><a class="link" href="#Data_Types:XCHARINFO" title="XCHARINFO"><span class="type">LISTofXCHARINFO</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Font" title="Font"><span class="errorname">Font</span></a>,
<a class="link" href="#Errors:Range" title="Range"><span class="errorname">Range</span></a>,
<a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request is equivalent to
<a class="link" href="#Requests:QueryXExtents16" title="QueryXExtents16"><code class="function">QueryXExtents16</code></a>
except that it
uses 1-byte character codes.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:QueryXExtents16"></a><code class="function">QueryXExtents16</code></h3></div></div></div><a id="idm2498" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>fontid</code></em>:</td><td align="left"><a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a></td></tr><tr><td align="left"><em class="parameter"><code>range</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr><tr><td align="left"><em class="parameter"><code>chars</code></em>:</td><td align="left"><a class="link" href="#Data_Types:CHAR2B" title="CHAR2B"><span class="type">LISTofCHAR2B</span></a></td></tr><tr><td align="left">▶</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>extents</code></em>:</td><td align="left"><a class="link" href="#Data_Types:XCHARINFO" title="XCHARINFO"><span class="type">LISTofXCHARINFO</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Font" title="Font"><span class="errorname">Font</span></a>,
<a class="link" href="#Errors:Range" title="Range"><span class="errorname">Range</span></a>,
<a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request returns a list of glyph extents from the open
font associated with FONTID for the series of characters
specified by <em class="parameter"><code>RANGE</code></em> and <em class="parameter"><code>CHARS</code></em>.
    </p><p>
If <em class="parameter"><code>RANGE</code></em> is <code class="constant">True</code>,
each succeeding pair of elements in <em class="parameter"><code>CHARS</code></em> is
treated as a range of characters for which extents should be
returned.  If <em class="parameter"><code>CHARS</code></em> contains an odd number of elements,
the font's <em class="structfield"><code>XFONTINFO.CHAR-RANGE.MAX-CHAR</code></em>
is implicitly appended to
the list.  If <em class="parameter"><code>CHARS</code></em> contains no elements, the list is
implicitly replaced with the font's
<em class="structfield"><code>XFONTINFO.CHAR-RANGE.</code></em>  If
any of the resulting character ranges are invalid, a
<a class="link" href="#Errors:Range" title="Range"><span class="errorname">Range</span></a>
error is returned.  Otherwise, the character ranges are
concatenated in the order given by <em class="parameter"><code>CHARS</code></em> to produce
a set of character codes for which extents are returned.
    </p><p>
If <em class="parameter"><code>RANGE</code></em> is <code class="constant">False</code>,
then <em class="parameter"><code>CHARS</code></em> specifies the set of character
codes for which extents are returned.  If <em class="parameter"><code>CHARS</code></em> is of
zero length, then a zero-length list of extents is returned.
    </p><p>
The extents for each character code in the resulting set (which
may contain duplicates) are returned in the order in
which the character codes appear in the set.
At least one metric for each character shall be non-zero
unless the character is not encoded in the font, in which case
all-zero metrics are returned.
A blank, zero-width character can be encoded
with non-zero but equal left and right bearings.
    </p><p>
If <em class="parameter"><code>FONTID</code></em> is not associated with any open fonts, a
<a class="link" href="#Errors:Font" title="Font"><span class="errorname">Font</span></a>
error is
returned.  If <em class="parameter"><code>RANGE</code></em> is <code class="constant">True</code>
and <em class="parameter"><code>CHARS</code></em> contains any invalid ranges, a
<a class="link" href="#Errors:Range" title="Range"><span class="errorname">Range</span></a>
error is returned.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:QueryXBitmaps8"></a><code class="function">QueryXBitmaps8</code></h3></div></div></div><a id="idm2572" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>fontid</code></em>:</td><td align="left"><a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a></td></tr><tr><td align="left"><em class="parameter"><code>range</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr><tr><td align="left"><em class="parameter"><code>chars</code></em>:</td><td align="left"><a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a></td></tr><tr><td align="left"><em class="parameter"><code>format</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BITMAPFORMAT" title="BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a></td></tr><tr><td align="left">▶+</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>replies-following-hint</code></em>:</td><td align="left"><span class="type">CARD32</span></td></tr><tr><td align="left"><em class="parameter"><code>offsets</code></em>:</td><td align="left"><a class="link" href="#Data_Types:OFFSET32" title="OFFSET32"><span class="type">LISTofOFFSET32</span></a></td></tr><tr><td align="left"><em class="parameter"><code>bitmaps</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">LISTofBYTE</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Font" title="Font"><span class="errorname">Font</span></a>,
<a class="link" href="#Errors:Range" title="Range"><span class="errorname">Range</span></a>,
<a class="link" href="#Errors:Format" title="Format"><span class="errorname">Format</span></a>,
<a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request is equivalent to
<a class="link" href="#Requests:QueryXBitmaps16" title="QueryXBitmaps16"><code class="function">QueryXBitmaps16</code></a>
except that it
uses 1-byte character codes.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:QueryXBitmaps16"></a><code class="function">QueryXBitmaps16</code></h3></div></div></div><a id="idm2639" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>fontid</code></em>:</td><td align="left"><a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a></td></tr><tr><td align="left"><em class="parameter"><code>range</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr><tr><td align="left"><em class="parameter"><code>chars</code></em>:</td><td align="left"><a class="link" href="#Data_Types:CHAR2B" title="CHAR2B"><span class="type">LISTofCHAR2B</span></a></td></tr><tr><td align="left"><em class="parameter"><code>format</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BITMAPFORMAT" title="BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a></td></tr><tr><td align="left">▶+</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>replies-following-hint</code></em>:</td><td align="left"><span class="type">CARD32</span></td></tr><tr><td align="left"><em class="parameter"><code>offsets</code></em>:</td><td align="left"><a class="link" href="#Data_Types:OFFSET32" title="OFFSET32"><span class="type">LISTofOFFSET32</span></a></td></tr><tr><td align="left"><em class="parameter"><code>bitmaps</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">LISTofBYTE</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Font" title="Font"><span class="errorname">Font</span></a>,
          <a class="link" href="#Errors:Range" title="Range"><span class="errorname">Range</span></a>,
          <a class="link" href="#Errors:Format" title="Format"><span class="errorname">Format</span></a>,
          <a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request returns a list of glyph bitmaps from the open font associated
with <em class="parameter"><code>FONTID</code></em> for the series of characters
specified by <em class="parameter"><code>RANGE</code></em> and <em class="parameter"><code>CHARS</code></em>.
    </p><p>
If <em class="parameter"><code>RANGE</code></em> is <code class="constant">True</code>, each succeeding
pair of elements in <em class="parameter"><code>CHARS</code></em> is
treated as a range of characters for which bitmaps should be
returned.  If <em class="parameter"><code>CHARS</code></em> contains an odd number of elements,
the font's <em class="structfield"><code>XFONTINFO.CHAR-RANGE.MAX-CHAR</code></em>
is implicitly appended to
the list.  If <em class="parameter"><code>CHARS</code></em> contains no elements, the list is
implicitly replaced with the font's
<em class="structfield"><code>XFONTINFO.CHAR-RANGE.</code></em>  If
any of the resulting character ranges are invalid, a <a class="link" href="#Errors:Range" title="Range"><span class="errorname">Range</span></a>
error is returned.  Otherwise, the character ranges are
concatenated in the order given by <em class="parameter"><code>CHARS</code></em> to produce
a set of character codes for which bitmaps are returned.
    </p><p>
If <em class="parameter"><code>RANGE</code></em> is <code class="constant">False</code>,
then <em class="parameter"><code>CHARS</code></em> specifies the set of character
codes for which bitmaps are returned.  If <em class="parameter"><code>CHARS</code></em>
is of zero length, then a single reply containing a zero-length list of
offsets and bitmaps is returned.
    </p><p>
If any of the resulting character ranges are invalid, a
<a class="link" href="#Errors:Range" title="Range"><span class="errorname">Range</span></a>
error is returned.  Otherwise, the resulting character ranges
are concatenated in the order given by <em class="parameter"><code>CHARS</code></em>
to produce a set of character codes for which bitmaps are returned.
    </p><p>
The server is free to return the glyph bitmaps in multiple
replies to reduce the amount of buffering that is necessary.
In this situation, the set of characters obtained above is
partitioned into an implementation-dependent number of
ordered, non-overlapping subsets containing runs of one or
more consecutive characters.  The global ordering of
characters must be maintained such that concatenating the
subsets in order that they were produced yields the original
set.  A reply is generated for each subset, in the order that
it was produced.
    </p><p>
For each character in a subset, an image of that character's
glyph is described by a rectangle of bits corresponding to the
pixels specified by FORMAT.IMAGE-RECT.  Within the image, set
and clear bits represent inked and non-inked pixels,
respectively.
    </p><p>
Each scanline of a glyph image, from top to bottom, is zero-padded
on the right to a multiple of the number of bits specified by
FORMAT.SCANLINE-PAD.  The scanline is then divided from left
to right into a sequence of FORMAT.SCANLINE-UNIT bits.  The
bits of each unit are then arranged such that the left-most
pixel is stored in the most- or least-significant bit,
according to FORMAT.BIT-ORDER-MSB.  The bytes of each unit are
then arranged such that the most- or least-significant byte,
according to FORMAT.BYTE-ORDER-MSB, is transmitted first.
Finally, the units are arranged such that the left-most is
transmitted first and the right-most is transmitted last.
    </p><p>
The individual images within a subset are then concatenated in
a server-dependent order to form the <em class="parameter"><code>BITMAPS</code></em> data
of the reply.  If a glyph image is duplicated within a reply, the
server is free to return fewer (but at least one) copies of
the image.  If a character is not encoded within the font, a
zero-length bitmap is substituted for this character.  Each
glyph image must begin at a bit position that is a multiple of
the FORMAT.SCANLINE-UNIT.
    </p><p>
The <em class="parameter"><code>OFFSETS</code></em> array in a reply contains one entry
for each character in the subset being returned, in the order that the
characters appear in the subset.  Each entry specifies the
starting location in bytes and size in bytes of the
corresponding glyph image in the <em class="parameter"><code>BITMAPS</code></em> data of that
reply (i.e. an offset may not refer to data in another reply).
    </p><p>
The <em class="parameter"><code>REPLIES-FOLLOWING-HINT</code></em> field in all but the
last reply contains a positive value that specifies the number of replies
that are likely, but not required, to follow.  In the last
reply, which may contain data for zero or more characters,
this field is set to zero.
    </p><p>
If <em class="parameter"><code>FONTID</code></em> is not associated with any open fonts,
a <a class="link" href="#Errors:Font" title="Font"><span class="errorname">Font</span></a>
error is returned.  If <em class="parameter"><code>RANGE</code></em> is
<code class="constant">True</code> and <em class="parameter"><code>CHARS</code></em> contains any
invalid ranges, a
<a class="link" href="#Errors:Range" title="Range"><span class="errorname">Range</span></a> error
is returned.  If <em class="parameter"><code>FORMAT</code></em> is invalid, a
<a class="link" href="#Errors:Format" title="Format"><span class="errorname">Format</span></a> error
is returned.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:CloseFont"></a><code class="function">CloseFont</code></h3></div></div></div><a id="idm2749" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>fontid</code></em>:</td><td align="left"><a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a></td></tr><tr><td align="left">Errors:</td><td align="left"><a class="link" href="#Errors:Font" title="Font"><span class="errorname">Font</span></a>, <a class="link" href="#Errors:Alloc" title="Alloc"><span class="errorname">Alloc</span></a></td></tr></tbody></table></div><p>
This request indicates that the specified <em class="parameter"><code>FONTID</code></em>
should no longer be associated with an open font.  The server is free to
release any client-specific storage or licenses allocated for
the font.  The client may reuse the value of <em class="parameter"><code>FONTID</code></em>
in a subsequent
<a class="link" href="#Requests:OpenBitmapFont" title="OpenBitmapFont"><code class="function">OpenBitmapFont</code></a>
request.
    </p><p>
If <em class="parameter"><code>FONTID</code></em> is not associated with any open fonts, a
<a class="link" href="#Errors:Font" title="Font"><span class="errorname">Font</span></a>
error is returned.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Requests:close_connection"></a>close connection</h3></div></div></div><a id="idm2780" class="indexterm"></a><p>
When a connection is closed, a
<a class="link" href="#Requests:CloseFont" title="CloseFont"><code class="function">CloseFont</code></a>
is done on all fonts
that are open on the connection.  In addition, the server is
free to release any storage or licenses allocated on behalf of
the client that made the connection.
    </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Errors"></a>Errors</h2></div></div></div><p>
All errors are at least 16 bytes long and contain the following fields:
</p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>type</code></em>:</td><td align="left"><span class="type">CARD8</span></td><td align="left">value of 1</td></tr><tr><td align="left"><em class="parameter"><code>error-code</code></em>:</td><td align="left"><span class="type">CARD8</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>sequence-number</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>length</code></em>:</td><td align="left"><span class="type">CARD32</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>timestamp</code></em>:</td><td align="left"><a class="link" href="#Data_Types:TIMESTAMP" title="TIMESTAMP"><span class="type">TIMESTAMP</span></a></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>major-opcode</code></em>:</td><td align="left"><span class="type">CARD8</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>minor-opcode</code></em>:</td><td align="left"><span class="type">CARD8</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
The TYPE field has a value of one.  The ERROR-CODE field specifies which error
occurred.  Core errors codes are in the range 0 through 127, extension error
codes are in the range 128 through 255.  The SEQUENCE-NUMBER field contains the
least significant 16 bits of the sequence number of the request that caused the
error.  The LENGTH field specifies the length of the error packet in 4-byte
units and must have a value of at least 4.  The TIMESTAMP specifies the server
time when the error occurred.  The MAJOR-OPCODE and MINOR-OPCODE (zero for core
requests) fields specify the type of request that generated the error.  The
DATA-OR-UNUSED field may be used for 16 bits of error-specific information.  If
LENGTH is greater than four, these fields are followed by (LENGTH - 4) * 4
bytes of extra data.
</p><p>
The following errors are defined for the core protocol:
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:Request"></a><span class="errorname">Request</span></h3></div></div></div><a id="idm2841" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr></tbody></table></div><p>
This error is generated by any request that has an unknown
combination of major and minor request numbers, or by any
extension request that is issued before a
<a class="link" href="#Requests:QueryExtension" title="QueryExtension"><code class="function">QueryExtension</code></a>
of that extension.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:Format"></a><span class="errorname">Format</span></h3></div></div></div><a id="idm2863" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr><tr><td align="left"><em class="parameter"><code>format</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BITMAPFORMAT" title="BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a></td><td align="left">bad format value</td></tr></tbody></table></div><p>
This error is generated by the use of an invalid <a class="link" href="#Data_Types:BITMAPFORMAT" title="BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a>
in the
<a class="link" href="#Requests:OpenBitmapFont" title="OpenBitmapFont"><code class="function">OpenBitmapFont</code></a>,
<a class="link" href="#Requests:QueryXBitmaps8" title="QueryXBitmaps8"><code class="function">QueryXBitmaps8</code></a>, and
<a class="link" href="#Requests:QueryXBitmaps16" title="QueryXBitmaps16"><code class="function">QueryXBitmaps16</code></a>
requests.
The value that caused the error is included as extra data.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:Font"></a><span class="errorname">Font</span></h3></div></div></div><a id="idm2898" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr><tr><td align="left"><em class="parameter"><code>fontid</code></em>:</td><td align="left"><a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a></td><td align="left">bad font identifier</td></tr></tbody></table></div><p>
This error is generated by an invalid <a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a> in the
<a class="link" href="#Requests:QueryXInfo" title="QueryXInfo"><code class="function">QueryXInfo</code></a>,
<a class="link" href="#Requests:QueryXExtents8" title="QueryXExtents8"><code class="function">QueryXExtents8</code></a>,
<a class="link" href="#Requests:QueryXExtents16" title="QueryXExtents16"><code class="function">QueryXExtents16</code></a>,
<a class="link" href="#Requests:QueryXBitmaps8" title="QueryXBitmaps8"><code class="function">QueryXBitmaps8</code></a>,
<a class="link" href="#Requests:QueryXBitmaps16" title="QueryXBitmaps16"><code class="function">QueryXBitmaps16</code></a>
and
<a class="link" href="#Requests:CloseFont" title="CloseFont"><code class="function">CloseFont</code></a>
requests.  The value that caused
the error is included as extra data.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:Range"></a><span class="errorname">Range</span></h3></div></div></div><a id="idm2939" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr><tr><td align="left"><em class="parameter"><code>range</code></em>:</td><td align="left"><a class="link" href="#Data_Types:RANGE" title="RANGE"><span class="type">RANGE</span></a></td><td align="left">bad range</td></tr></tbody></table></div><p>
This error is generated by an invalid <a class="link" href="#Data_Types:RANGE" title="RANGE"><span class="type">RANGE</span></a> in the
<a class="link" href="#Requests:QueryXExtents8" title="QueryXExtents8"><code class="function">QueryXExtents8</code></a>,
<a class="link" href="#Requests:QueryXExtents16" title="QueryXExtents16"><code class="function">QueryXExtents16</code></a>,
<a class="link" href="#Requests:QueryXBitmaps8" title="QueryXBitmaps8"><code class="function">QueryXBitmaps8</code></a>
and
<a class="link" href="#Requests:QueryXBitmaps16" title="QueryXBitmaps16"><code class="function">QueryXBitmaps16</code></a>
requests.  The
value that caused the error is included as extra data.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:EventMask"></a><span class="errorname">EventMask</span></h3></div></div></div><a id="idm2976" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr><tr><td align="left"><em class="parameter"><code>event-mask</code></em>:</td><td align="left"><a class="link" href="#Data_Types:EVENTMASK" title="EVENTMASK"><span class="type">EVENTMASK</span></a></td><td align="left">bad event mask</td></tr></tbody></table></div><p>
This error is generated by an invalid <a class="link" href="#Data_Types:EVENTMASK" title="EVENTMASK"><span class="type">EVENTMASK</span></a> in the
<a class="link" href="#Requests:SetEventMask" title="SetEventMask"><code class="function">SetEventMask</code></a>
request.  The value that caused the error is
included as extra data.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:AccessContext"></a><span class="errorname">AccessContext</span></h3></div></div></div><a id="idm3007" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr><tr><td align="left"><em class="parameter"><code>ac</code></em>:</td><td align="left"><a class="link" href="#Data_Types:ACCESSCONTEXT" title="ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a></td><td align="left">unaccepted <span class="type">AccessContext</span></td></tr></tbody></table></div><p>
This error is generated by an invalid <a class="link" href="#Data_Types:ACCESSCONTEXT" title="ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a> in the
<a class="link" href="#Requests:FreeAC" title="FreeAC"><code class="function">FreeAC</code></a>
or
<a class="link" href="#Requests:SetAuthorization" title="SetAuthorization"><code class="function">SetAuthorization</code></a>
request or by an
<a class="link" href="#Requests:OpenBitmapFont" title="OpenBitmapFont"><code class="function">OpenBitmapFont</code></a>
request performed without sufficient authorization.  In the
first two cases, the <a class="link" href="#Data_Types:ACCESSCONTEXT" title="ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a> of the errant request is
returned as extra data.  In the third case, the current
<a class="link" href="#Data_Types:ACCESSCONTEXT" title="ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a> is returned as extra data.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:IDChoice"></a><span class="errorname">IDChoice</span></h3></div></div></div><a id="idm3047" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr><tr><td align="left"><em class="parameter"><code>id</code></em>:</td><td align="left"><a class="link" href="#Data_Types:ID" title="ID"><span class="type">ID</span></a></td><td align="left">bad identifier</td></tr></tbody></table></div><p>
This error is generated by an invalid or already associated
<a class="link" href="#Data_Types:ACCESSCONTEXT" title="ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a> identifier in a
<a class="link" href="#Requests:CreateAC" title="CreateAC"><code class="function">CreateAC</code></a>
request or <a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a> identifier
in an
<a class="link" href="#Requests:OpenBitmapFont" title="OpenBitmapFont"><code class="function">OpenBitmapFont</code></a>
request.  The value that caused the error
is included as extra data.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:Name"></a><span class="errorname">Name</span></h3></div></div></div><a id="idm3082" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr></tbody></table></div><p>
This error is generated by a font name pattern that matches
no fonts in an
<a class="link" href="#Requests:OpenBitmapFont" title="OpenBitmapFont"><code class="function">OpenBitmapFont</code></a>
request or no catalogue names in a
<a class="link" href="#Requests:SetCatalogues" title="SetCatalogues"><code class="function">SetCatalogues</code></a>
request.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:Resolution"></a><span class="errorname">Resolution</span></h3></div></div></div><a id="idm3106" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">X value of errant resolution</td></tr><tr><td align="left"><em class="parameter"><code>y-resolution</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">Y value of errant resolution</td></tr><tr><td align="left"><em class="parameter"><code>point-size</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">point size of errant resolution</td></tr></tbody></table></div><p>
This error is generated in response to an invalid <a class="link" href="#Data_Types:RESOLUTION" title="RESOLUTION"><span class="type">RESOLUTION</span></a>
structure in a
<a class="link" href="#Requests:SetResolution" title="SetResolution"><code class="function">SetResolution</code></a>
request.  The value that caused the
error is included in the DATA-OR-UNUSED field and as extra data.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:Alloc"></a><span class="errorname">Alloc</span></h3></div></div></div><a id="idm3142" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr></tbody></table></div><p>
This error is generated by any request for which the server
lacks sufficient resources (especially memory).
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:Length"></a><span class="errorname">Length</span></h3></div></div></div><a id="idm3162" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr><tr><td align="left"><em class="parameter"><code>length</code></em>:</td><td align="left"><span class="type">CARD32</span></td><td align="left">bad length value</td></tr></tbody></table></div><p>
This error is generated by any request that has a length field
greater than (MAXIMUM-REQUEST-LENGTH * 4) bytes.  The value that
caused the error is included as extra data.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:Implementation"></a><span class="errorname">Implementation</span></h3></div></div></div><a id="idm3188" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>data-or-unused</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td align="left">unused</td></tr></tbody></table></div><p>
This error may be generated in response to any request that
the server is unable to process because it is deficient.  Use
of this error is highly discouraged and indicates lack of
conformance to the protocol.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Errors:Extensions"></a>Extensions</h3></div></div></div><p>
Additional errors may be defined by extensions.
    </p></div></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Events"></a>Events</h2></div></div></div><p>
Events may be generated in response to requests or at the server's discretion
after the initial connection setup information has been exchanged.  Each event
is at least 12 bytes long and contains the following fields:
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /><col align="left" class="c3" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>type</code></em>:</td><td align="left"><span class="type">CARD8</span></td><td align="left">value of 2</td></tr><tr><td align="left"><em class="parameter"><code>event-code</code></em>:</td><td align="left"><span class="type">CARD8</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>sequence-number</code></em>:</td><td align="left"><span class="type">CARD16</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>length</code></em>:</td><td align="left"><span class="type">CARD32</span></td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>timestamp</code></em>:</td><td align="left"><a class="link" href="#Data_Types:TIMESTAMP" title="TIMESTAMP"><span class="type">TIMESTAMP</span></a></td><td class="auto-generated"> </td></tr></tbody></table></div><p>
</p><p>
The TYPE field contains the value 2.  The EVENT-CODE field specifies the number
of the event and is in the range 0-127 for core events or the range 128-255 for
extensions.  The SEQUENCE-NUMBER field specifies the least significant 16 bits
of the sequence number of the last request to have been processed by the
server.  The LENGTH field specifies the number of 4-byte units in this event
packet and must always have a value of at least 3.  The <a class="link" href="#Data_Types:TIMESTAMP" title="TIMESTAMP"><span class="type">TIMESTAMP</span></a> field
specifies the server time when the event occurred.  If LENGTH is greater than
three, these fields are followed by (LENGTH - 3) * 4 bytes of additional data.
</p><p>
Events are described using the following syntax:
  </p><div class="blockquote"><blockquote class="blockquote"><p>
    <span class="bold"><strong><code class="function">EventName</code></strong></span>
    </p><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>arg1</code></em>:</td><td align="left"><span class="type">type1</span></td></tr><tr><td align="left"> ...</td><td class="auto-generated"> </td></tr><tr><td align="left"><em class="parameter"><code>argN</code></em>:</td><td align="left"><span class="type">typeN</span></td></tr></tbody></table></div><p>
    Description
  </p></blockquote></div><p>
</p><p>
If an event does not provide any extra arguments, the
<em class="parameter"><code>arg1</code></em>...<em class="parameter"><code>argN</code></em>
lines are omitted from the description.
</p><p>
The core X Font Service protocol defines the following events:
</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Events:KeepAlive"></a><code class="function">KeepAlive</code></h3></div></div></div><a id="idm3276" class="indexterm"></a><p>
This unsolicited, nonmaskable event may be sent by the
server to verify that the connection has not been broken
(for transports that do not provide this information).
Clients should acknowledge receipt of this request
by sending any request (such as
<a class="link" href="#Requests:NoOp" title="NoOp"><code class="function">NoOp</code></a>
).
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Events:CatalogueListNotify"></a><code class="function">CatalogueListNotify</code></h3></div></div></div><a id="idm3284" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>added</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr><tr><td align="left"><em class="parameter"><code>deleted</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr></tbody></table></div><p>
This event is sent to clients that have included
<code class="function"><code class="constant">CatalogueListChangeMask</code></code>
in their core event mask
whenever the list of catalogues that are available has
changed.  The ADDED field is <code class="constant">True</code> if new catalogues have
been added to the server, otherwise it is <code class="constant">False</code>.  The
DELETED field is <code class="constant">True</code> if any existing catalogues have
been removed from the server, otherwise it is <code class="constant">False</code>.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Events:FontListNotify"></a><code class="function">FontListNotify</code></h3></div></div></div><a id="idm3313" class="indexterm"></a><div class="informaltable"><table class="informaltable" border="0"><colgroup><col align="left" class="c1" /><col align="left" class="c2" /></colgroup><tbody><tr><td align="left"><em class="parameter"><code>added</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr><tr><td align="left"><em class="parameter"><code>deleted</code></em>:</td><td align="left"><a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a></td></tr></tbody></table></div><p>
This event is sent to clients that have included
<code class="function"><code class="constant">FontListChangeMask</code></code>
in their event mask whenever the
list of fonts that are provided by the currently selected
catalogues has changed.  The ADDED field is <code class="constant">True</code> if new
fonts have been added to any of the catalogues currently
used by the client, otherwise it is <code class="constant">False</code>.  The DELETED
field is <code class="constant">True</code> if any existing fonts have been removed
from any of catalogues used by the client, otherwise it
is <code class="constant">False</code>.
    </p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="Events:Extensions"></a>Extensions</h3></div></div></div><p>
Additional events may be defined by extensions.
    </p></div></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Protocol_Encoding"></a>Chapter 5. Protocol Encoding</h1></div></div></div><div class="toc"><p><strong>Table of Contents</strong></p><dl class="toc"><dt><span class="section"><a href="#Encoding::Data_Types">Data Types</a></span></dt><dt><span class="section"><a href="#Encoding::Requests">Requests</a></span></dt><dt><span class="section"><a href="#Encoding::Errors">Errors</a></span></dt><dt><span class="section"><a href="#Encoding::Events">Events</a></span></dt></dl></div><p>
Numbers that are prefixed with <span class="quote">“<span class="quote"><code class="literal">#x</code></span>”</span>
are in hexadecimal (base 16).  All other
numbers are in decimal.  Requests, replies, errors, events, and compound types
are described using the syntax:
</p><pre class="literallayout">

    Name
     <span class="emphasis"><em>count</em></span>          <span class="emphasis"><em>contents</em></span>     <span class="emphasis"><em>name</em></span>
     ...
     <span class="emphasis"><em>count</em></span>          <span class="emphasis"><em>contents</em></span>     <span class="emphasis"><em>name</em></span>
</pre><p>
where COUNT is the number of bytes in the data stream occupied by this
field, CONTENTS is the name of the type as given in
<a class="link" href="#Data_Types" title="Data Types">Section 4</a> or the value if
this field contains a constant, and NAME is a description of this field.
</p><p>
Objects containing counted lists use a lowercase single-letter variable (whose
scope is limited to the request, reply, event, or error in which it is found)
to represent the number of objects in the list.  These variables, and any
expressions in which they are used, should be treated as unsigned integers.
Multiple copies of an object are indicated by CONTENTS prefix
<span class="quote">“<span class="quote">LISTof</span>”</span>.
</p><p>
Unused bytes (whose value is undefined) will have a blank CONTENTS field and a
NAME field of <span class="quote">“<span class="quote">unused</span>”</span>.  Zeroed bytes (whose value must be zero)
will have a blank CONTENTS field and a NAME field of <span class="quote">“<span class="quote">zero</span>”</span>.
The expression pad(e) refers to the number of bytes
needed to round a value <span class="quote">“<span class="quote">e</span>”</span> up to the closed
multiple of four:
</p><pre class="literallayout">

     pad(e) = (4 - (e mod 4)) mod 4
</pre><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Encoding::Data_Types"></a>Data Types</h2></div></div></div><pre class="literallayout">
<a class="link" href="#Data_Types:ACCESSCONTEXT" title="ACCESSCONTEXT"><span class="type">ACCESSCONTEXT</span></a>
4     <span class="type">CARD32</span>                 access context

      with at least one of the following bits set:

        #x1fffffff

      but none of the following bits set:

        #xe0000000        zero


<a class="link" href="#Data_Types:ALTERNATESERVER" title="ALTERNATESERVER"><span class="type">ALTERNATESERVER</span></a>
1     <span class="type">BOOL</span>                   subset
1     n                      length of name
n     <span class="type">STRING8</span>                name
p                            unused, p=pad(n+2)

<a class="link" href="#Data_Types:AUTH" title="AUTH"><span class="type">AUTH</span></a>
2     n                      length of name
2     d                      length of data
n     <span class="type">STRING8</span>                name
p                            unused, p=pad(n)
d     <span class="type">STRING8</span>                data
q                            unused, q=pad(d)


<a class="link" href="#Data_Types:BITMAPFORMAT" title="BITMAPFORMAT"><span class="type">BITMAPFORMAT</span></a>
4     <span class="type">CARD32</span>                 value, union of the following bits:

        #x00000001        ByteOrderMSB
        #x00000002        BitOrderMSB
        #x00000000        <code class="constant">ImageRectMin</code>
        #x00000004        <code class="constant">ImageRectMaxWidth</code>
        #x00000008        <code class="constant">ImageRectMax</code>
        #x00000000        <code class="constant">ScanlinePad8</code>
        #x00000100        <code class="constant">ScanlinePad16</code>
        #x00000200        <code class="constant">ScanlinePad32</code>
        #x00000300        <code class="constant">ScanlinePad64</code>
        #x00000000        <code class="constant">ScanlineUnit8</code>
        #x00001000        <code class="constant">ScanlineUnit16</code>
        #x00002000        <code class="constant">ScanlineUnit32</code>
        #x00003000        <code class="constant">ScanlineUnit64</code>

      except for the following bits which must be zero:

        #xffffccf0        zero

      and the following of which at most one bit may be set:

        #x0000000c        at most one bit can be set


<a class="link" href="#Data_Types:BITMAPFORMATMASK" title="BITMAPFORMATMASK"><span class="type">BITMAPFORMATMASK</span></a>
4     <span class="type">CARD32</span>                 value, mask of the following bits:

        #x00000001        <code class="constant">ByteOrderMask</code>
        #x00000002        <code class="constant">BitOrderMask</code>
        #x00000004        <code class="constant">ImageRectMask</code>
        #x00000008        <code class="constant">ScanlinePadMask</code>
        #x00000010        <code class="constant">ScanlineUnitMask</code>

      except for the following bits which must be zero:

        #xffffffe0        zero

<a class="link" href="#Data_Types:BOOL" title="BOOL"><span class="type">BOOL</span></a>
1     <span class="type">BOOL</span>                   boolean, one of the following values:
        0                 <code class="constant">False</code>
        1                 <code class="constant">True</code>

<a class="link" href="#Data_Types:BYTE" title="BYTE"><span class="type">BYTE</span></a>
1     <span class="type">BYTE</span>                   unsigned byte of data

<span class="type">CARD8</span>
1     <span class="type">CARD8</span>                  8-bit unsigned integer

<span class="type">CARD16</span>
2     <span class="type">CARD16</span>                 16-bit unsigned integer

<span class="type">CARD32</span>
4     <span class="type">CARD32</span>                 32-bit unsigned integer

<a class="link" href="#Data_Types:CHAR2B" title="CHAR2B"><span class="type">CHAR2B</span></a>
1     <span class="type">CARD8</span>                  byte1
1     <span class="type">CARD8</span>                  byte2

<a class="link" href="#Data_Types:EVENTMASK" title="EVENTMASK"><span class="type">EVENTMASK</span></a>
4     <span class="type">CARD32</span>                 event mask

      for core events, this is union of the following bits:

        #00000001         <code class="constant">CatalogueListChangeMask</code>
        #00000002         <code class="constant">FontListChangeMask</code>

      but none of the following bits set:

        #fffffffc

      extensions define their own sets of bits

<a class="link" href="#Data_Types:FONTID" title="FONTID"><span class="type">FONTID</span></a>
4     <span class="type">CARD32</span>                 font identifier

      with at least one of the following bits set:

        #x1fffffff

      but none of the following bits set:

        #xe0000000        zero

<span class="type">INT8</span>
1     <span class="type">INT8</span>                   8-bit signed integer

<span class="type">INT16</span>
2     <span class="type">INT16</span>                  16-bit signed integer

<span class="type">INT32</span>
4     <span class="type">INT32</span>                  32-bit signed integer

<a class="link" href="#Data_Types:OFFSET32" title="OFFSET32"><span class="type">OFFSET32</span></a>
4     <span class="type">CARD32</span>                 position (or integer value)
4     <span class="type">CARD32</span>                 length

<a class="link" href="#Data_Types:PROPINFO" title="PROPINFO"><span class="type">PROPINFO</span></a>
4     n                      number of <span class="type">PROPOFFSET</span> components
4     m                      number of bytes of property data
20*n  <span class="type">PROPOFFSET</span>             property offsets into data block
m     <span class="type">LISTofBYTE</span>             property data block

<a class="link" href="#Data_Types:PROPOFFSET" title="PROPOFFSET"><span class="type">PROPOFFSET</span></a>
8     <span class="type">OFFSET32</span>               name in data block
8     <span class="type">OFFSET32</span>               value in data block
1     <span class="type">CARD8</span>                  type, one of the following values:
        0                 <code class="constant">String</code>
        1                 <code class="constant">Unsigned</code>
        2                 <code class="constant">Signed</code>
        3                 zero

<a class="link" href="#Data_Types:RANGE" title="RANGE"><span class="type">RANGE</span></a>
2     <span class="type">CHAR2B</span>                 minimum character code
2     <span class="type">CHAR2B</span>                 maximum character code

<a class="link" href="#Data_Types:RESOLUTION" title="RESOLUTION"><span class="type">RESOLUTION</span></a>
2     <span class="type">CARD16</span>                 x resolution in pixels per inch
2     <span class="type">CARD16</span>                 y resolution in pixels per inch
2     <span class="type">CARD16</span>                 point size in decipoints

STRNAME
1     n                      length of name
n     <span class="type">STRING8</span>                name

<a class="link" href="#Data_Types:STRING8" title="STRING8"><span class="type">STRING8</span></a>
n     <span class="type">LISTofBYTE</span>             array of 8-bit character values

<a class="link" href="#Data_Types:TIMESTAMP" title="TIMESTAMP"><span class="type">TIMESTAMP</span></a>
4     <span class="type">CARD32</span>                 milliseconds since server time origin

<a class="link" href="#Data_Types:XCHARINFO" title="XCHARINFO"><span class="type">XCHARINFO</span></a>
2     <span class="type">INT16</span>                  left bearing
2     <span class="type">INT16</span>                  right bearing
2     <span class="type">INT16</span>                  width
2     <span class="type">INT16</span>                  ascent
2     <span class="type">INT16</span>                  descent
2     <span class="type">CARD16</span>                 attributes

<a class="link" href="#Data_Types:XFONTINFO" title="XFONTINFO"><span class="type">XFONTINFO</span></a>
4     <span class="type">CARD32</span>                 flags, union of the following bits:

        #x00000001        <code class="constant">AllCharactersExist</code>
        #x00000002        <code class="constant">InkInside</code>
        #x00000004        <code class="constant">HorizontalOverlap</code>

      but none of the following bits set:

        #xfffffff8        zero

4     <span class="type">RANGE</span>                  range of characters in font
1     <span class="type">CARD8</span>                  drawing direction
        0                 <code class="constant">LeftToRight</code>
        1                 <code class="constant">RightToLeft</code>
1                            unused
2     <span class="type">CHAR2B</span>                 default character
12    <span class="type">XCHARINFO</span>              minimum bounds
12    <span class="type">XCHARINFO</span>              maximum bounds
2     <span class="type">INT16</span>                  font ascent
2     <span class="type">INT16</span>                  font descent
n     <span class="type">PROPINFO</span>               property data
</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Encoding::Requests"></a>Requests</h2></div></div></div><p><a class="link" href="#Requests:open_connection" title="open connection"><span class="bold"><strong>open connection</strong></span></a></p><pre class="literallayout">
1     <span class="type">BYTE</span>                   byteorder, one of the values:
        #x42              MostSignificant Byte first
        #x6c              LeastSignificant Byte first
1     <span class="type">CARD8</span>                  numberof auth in auth-data
2     2                      client-major-protocol-version
2     0                      client-minor-protocol-version
2     a/4 lengthof           auth-data
a     <span class="type">LISTofAUTH</span>             auth-data
▶
2     <span class="type">CARD16</span>                 status
        0                 <code class="constant">Success</code>
        1                 <code class="constant">Continue</code>
        2                 <code class="constant">Busy</code>
        3                 <code class="constant">Denied</code>
2     2                      major version
2     0                      version
1     <span class="type">CARD8</span>                  numberof alternate-servers-hint
1     <span class="type">CARD8</span>                  authorization-index
2     a/4                    lengthof alternate-servers-hint
2     (d+q)/4                lengthof authorization-data
a     <span class="type">LISTofALTERNATESERVER</span>  alternate-servers-hint
d     <span class="type">LISTofBYTE</span>             authorization-data
q                            unused, q=pad(d)
</pre><p>
If STATUS is <code class="constant">Busy</code> or <code class="constant">Denied</code>, the protocol stops and the connection is
closed. If STATUS is <code class="constant">Continue</code>, the client is expected to respond with
additional data, to which the server responds with
a new status value and more data. This dialog continues until the status
is set to <code class="constant">Success</code>, or until the server sets STATUS to <code class="constant">Busy</code> or <code class="constant">Denied</code>
and closes the connection:
</p><pre class="literallayout">
◀
4     1+(d+q)/4              length
d     <span class="type">LISTofBYTE</span>             more-authorization-data
q                            unused, q=pad(d)
▶
4     2+(d+q)/4              length
2     <span class="type">CARD16</span>                 status
        0                 <code class="constant">Success</code>
        1                 <code class="constant">Continue</code>
        2                 <code class="constant">Busy</code>
        3                 <code class="constant">Denied</code>
2                            unused
d     <span class="type">LISTofBYTE</span>             more-authorization-data
q                            unused, q=pad(d)
</pre><p>
When STATUS is <code class="constant">Success</code>, the protocol resumes with the following
sent by the server:
</p><pre class="literallayout">
4     3+(v+w)/4              length of rest of data
2     <span class="type">CARD16</span>                 maximum-request-length
2     v                      length of vendor string
4     <span class="type">CARD32</span>                 release-number
v     <span class="type">STRING8</span>                vendor-string
w                            unused, w=pad(v)
</pre><p>
Once the connection has been established, the client may send the
following requests:
</p><pre class="literallayout">
<a class="link" href="#Requests:NoOp" title="NoOp"><span class="bold"><strong><code class="function">NoOp</code></strong></span></a>
1   0                        major-opcode
1                            unused
2   1                        length

<a class="link" href="#Requests:ListExtensions" title="ListExtensions"><span class="bold"><strong><code class="function">ListExtensions</code></strong></span></a>
1   1                        major-opcode
1                            unused
2   1                        length
▶
1   0                        type reply
1   <span class="type">CARD8</span>                    numberof names
2   <span class="type">CARD16</span>                   sequence-number
4   2+(n+p)/4                length
n   LISTofSTRNAME            names
p                            unused, p=pad(n)

<a class="link" href="#Requests:QueryExtension" title="QueryExtension"><span class="bold"><strong><code class="function">QueryExtension</code></strong></span></a>
1   2                        major-opcode
1   n                        length of name
2   1+(n+p)/4                length
n   <span class="type">STRING8</span>                  name
p                            unused, p=pad(n)
▶
1   0                        type reply
1   <span class="type">BOOL</span>                     present
2   <span class="type">CARD16</span>                   sequence-number
4   5                        length
2   <span class="type">CARD16</span>                   major-version
2   <span class="type">CARD16</span>                   minor-version
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    first-event
1   <span class="type">CARD8</span>                    number-events
1   <span class="type">CARD8</span>                    first-error
1   <span class="type">CARD8</span>                    number-errors
3                            unused

<a class="link" href="#Requests:ListCatalogues" title="ListCatalogues"><span class="bold"><strong><code class="function">ListCatalogues</code></strong></span></a>
1   3                        major-opcode
1                            unused
2   3+(n+p)/4                length
4   <span class="type">CARD32</span>                   max-names
2   n                        length of pattern
2                            unused
n   <span class="type">STRING8</span>                  pattern
p                            unused, p=pad(n)
▶+
1   0                        type reply
1                            unused
2   <span class="type">CARD16</span>                   sequence-number
4   4+(n+p)/4                length
4   <span class="type">CARD32</span>                   replies-following-hint
4   <span class="type">CARD32</span>                   numberof catalogue-names
n   LISTofSTRNAME            catalogue-names
p                            unused, p=pad(n)

<a class="link" href="#Requests:SetCatalogues" title="SetCatalogues"><span class="bold"><strong><code class="function">SetCatalogues</code></strong></span></a>
1   4                        major-opcode
1   <span class="type">CARD8</span>                    numberof catalogue-names
2   1+(n+p)/4                length
n   LISTofSTRNAME            catalogue-names
p                            unused, p=pad(n)

<a class="link" href="#Requests:GetCatalogues" title="GetCatalogues"><span class="bold"><strong><code class="function">GetCatalogues</code></strong></span></a>
1   5                        major-opcode
1                            unused
2   1                        length
▶
1   0                        type reply
1   <span class="type">CARD8</span>                    numberof catalogue-names
2   <span class="type">CARD16</span>                   sequence-number
4   2+(n+p)/4                length
n   LISTofSTRNAME            catalogue-names
p                            unused, p=pad(n)

<a class="link" href="#Requests:SetEventMask" title="SetEventMask"><span class="bold"><strong><code class="function">SetEventMask</code></strong></span></a>
1   6                        major-opcode
1   <span class="type">CARD8</span>                    extension-opcode
2   2                        length
4   <span class="type">EVENTMASK</span>                event-mask

<a class="link" href="#Requests:GetEventMask" title="GetEventMask"><span class="bold"><strong><code class="function">GetEventMask</code></strong></span></a>
1   7                        major-opcode
1   <span class="type">CARD8</span>                    extension-opcode
2   1                        length
▶
1   0                        type reply
1                            unused
2   <span class="type">CARD16</span>                   sequence-number
4   3                        length
4   <span class="type">EVENTMASK</span>                event-mask

<a class="link" href="#Requests:CreateAC" title="CreateAC"><span class="bold"><strong><code class="function">CreateAC</code></strong></span></a>
1   8                        major-opcode
1   <span class="type">CARD8</span>                    numberof authorization-protocols
2   2+a/4                    length
4   <span class="type">ACCESSCONTEXT</span>            ac
a   <span class="type">LISTofAUTH</span>               authorization-protocols
▶
1   0                        type reply
1   <span class="type">CARD8</span>                    authorization-index
2   <span class="type">CARD16</span>                   sequence-number
4   3+(d+q)/4                length
2   <span class="type">CARD16</span>                   status
        0                    <code class="constant">Success</code>
        1                    <code class="constant">Continue</code>
        2                    <code class="constant">Busy</code>
        3                    <code class="constant">Denied</code>
2                            unused
d   <span class="type">LISTofBYTE</span>               authorization-data
q                            unused, q=pad(d)
</pre><p>
If STATUS is <code class="constant">Continue</code>, the client is expected to respond with additional
data, to which the server
responds with a new status value and more data. This dialog continues
until the status is set to
<code class="constant">Success</code>, <code class="constant">Busy</code>, or <code class="constant">Denied</code> at which point the request is finished.
</p><pre class="literallayout">
◀
4   1+(d+q)/4                length
d   <span class="type">LISTofBYTE</span>               more-authorization-data
q                            unused, q=pad(d)
▶
4   2+(d+q)/4                length
2   <span class="type">CARD16</span>                   status
        0                    <code class="constant">Success</code>
        1                    <code class="constant">Continue</code>
        2                    <code class="constant">Busy</code>
        3                    <code class="constant">Denied</code>
2                            unused
d   <span class="type">LISTofBYTE</span>               authorization-data
q                            unused, q=pad(d)

<a class="link" href="#Requests:FreeAC" title="FreeAC"><span class="bold"><strong><code class="function">FreeAC</code></strong></span></a>
1   9                        major-opcode
1                            unused
2   2                        length
4   <span class="type">ACCESSCONTEXT</span>            ac

<a class="link" href="#Requests:SetAuthorization" title="SetAuthorization"><span class="bold"><strong><code class="function">SetAuthorization</code></strong></span></a>
1   10                       major-opcode
1                            unused
2   2                        length
4   <span class="type">ACCESSCONTEXT</span>            ac

<a class="link" href="#Requests:SetResolution" title="SetResolution"><span class="bold"><strong><code class="function">SetResolution</code></strong></span></a>
1   11                       major-opcode
1   n                        number of resolutions
2   1+(6*n+p)/4              length
6*n <span class="type">LISTofRESOLUTION</span>         resolutions
p   p=pad(6*n)

<a class="link" href="#Requests:GetResolution" title="GetResolution"><span class="bold"><strong><code class="function">GetResolution</code></strong></span></a>
1   12                       major-opcode
1                            unused
2   1                        length
▶
1   0                        type reply
1   n                        number of resolutions
2   <span class="type">CARD16</span>                   sequence-number
4   2+(6*n+p)/4              length
6*n <span class="type">LISTofRESOLUTION</span>         resolutions
p   p=pad(6*n)

<a class="link" href="#Requests:ListFonts" title="ListFonts"><span class="bold"><strong><code class="function">ListFonts</code></strong></span></a>
1   13                       major-opcode
1                            unused
2   3+(n+p)/4                length
4   <span class="type">CARD32</span>                   max-names
2   n                        length of pattern
2                            unused
n   <span class="type">STRING8</span>                  pattern
p                            unused, p=pad(n)
▶+
1   0                        type reply
1                            unused
2   <span class="type">CARD16</span>                   sequence-number
4   4+(n+p)/4                length
4   <span class="type">CARD32</span>                   replies-following-hint
4   <span class="type">CARD32</span>                   numberof font-names
n   LISTofSTRNAME            font-names
p                            unused, p=pad(n)

<a class="link" href="#Requests:ListFontsWithXInfo" title="ListFontsWithXInfo"><span class="bold"><strong><code class="function">ListFontsWithXInfo</code></strong></span></a>
1   14                       major-opcode
1                            unused
2   3+(n+p)/4                length
4   <span class="type">CARD32</span>                   max-names
2   n                        length of pattern
2                            unused
n   <span class="type">STRING8</span>                  pattern
p                            unused, p=pad(n)
▶+ (except for last in series)
1   0                        type reply
1   n                        length of name
2   <span class="type">CARD16</span>                   sequence-number
4   3+(n+p+f)/4              length
4   <span class="type">CARD32</span>                   replies-hint
f   <span class="type">XFONTINFO</span>                fontinfo
n   <span class="type">STRING8</span>                  name
p                            unused, p=pad(n)
▶ (last in series)
1   0                        type reply
1   0                        last-reply indicator
2   <span class="type">CARD16</span>                   sequence-number
4   2                        reply length

<a class="link" href="#Requests:OpenBitmapFont" title="OpenBitmapFont"><span class="bold"><strong><code class="function">OpenBitmapFont</code></strong></span></a>
1   15                       major-opcode
1                            unused
2   4+(n+p)/4                length
4   <span class="type">FONTID</span>                   fontid
4   <span class="type">BITMAPFORMATMASK</span>         format-mask
4   <span class="type">BITMAPFORMAT</span>             format
n   STRNAME                  pattern
p                            unused, p=pad(n)
▶
1   0                        type reply
1   <span class="type">BOOL</span>                     otherid-valid
2   <span class="type">CARD16</span>                   sequence-number
4   4                        length
4   <span class="type">FONTID</span>                   otherid
1   <span class="type">BOOL</span>                     cachable
3                            unused

<a class="link" href="#Requests:QueryXInfo" title="QueryXInfo"><span class="bold"><strong><code class="function">QueryXInfo</code></strong></span></a>
1   16                       major-opcode
1                            unused
2   2                        length
4   <span class="type">FONTID</span>                   fontid
▶
1   0                        type reply
1                            unused
2   <span class="type">CARD16</span>                   sequence-number
4   2+f/4                    length
f   <span class="type">XFONTINFO</span>                fontinfo
p                            unused, p=pad(f)

<a class="link" href="#Requests:QueryXExtents8" title="QueryXExtents8"><span class="bold"><strong><code class="function">QueryXExtents8</code></strong></span></a>
1   17                       major-opcode
1   <span class="type">BOOL</span>                     range
2   3+(n+p)/4                length
4   <span class="type">FONTID</span>                   fontid
4   n                        number chars entries
n   <span class="type">STRING8</span>                  chars
p                            unused, p=pad(n)
▶
1   0                        type reply
1                            unused
2   <span class="type">CARD16</span>                   sequence-number
4   3+3*n                    length
4   n                        number of extents
12*n <span class="type">LISTofXCHARINFO</span>         extents

<a class="link" href="#Requests:QueryXExtents16" title="QueryXExtents16"><span class="bold"><strong><code class="function">QueryXExtents16</code></strong></span></a>
1   18                       major-opcode
1   <span class="type">BOOL</span>                     range
2   3+(2*n+p)/4              length
4   <span class="type">FONTID</span>                   fontid
4   n                        number chars entries
2*n                          <span class="type">LISTofCHAR2B</span> chars
p                            unused, p=pad(2*n)
▶
1   0                        type reply
1                            unused
2   <span class="type">CARD16</span>                   sequence-number
4   3+3*n                    length
4   n                        number of extents
12*n <span class="type">LISTofXCHARINFO</span>         extents

<a class="link" href="#Requests:QueryXBitmaps8" title="QueryXBitmaps8"><span class="bold"><strong><code class="function">QueryXBitmaps8</code></strong></span></a>
1   19                       major-opcode
1   <span class="type">BOOL</span>                     range
2   4+(n+p)/4                length
4   <span class="type">FONTID</span>                   fontid
4   <span class="type">BITMAPFORMAT</span>             format
4   n                        number of chars entries
n   <span class="type">STRING8</span>                  chars
p                            unused, p=pad(n)
▶+
1   0                        type reply
1                            unused
2   <span class="type">CARD16</span>                   sequence-number
4   5+2*n+(m+p)/4            length
4   <span class="type">CARD32</span>                   replies-following-hint
4   n                        number of offsets
4   m                        number of bytes of glyph images
8*n <span class="type">LISTofOFFSET32</span>           offsets
m   <span class="type">LISTofBYTE</span>               glyphimages
p                            unused, p=pad(m)

<a class="link" href="#Requests:QueryXBitmaps16" title="QueryXBitmaps16"><span class="bold"><strong><code class="function">QueryXBitmaps16</code></strong></span></a>
1   20                       major-opcode
1   <span class="type">BOOL</span>                     range
2   4+(2*n+p)/4              length
4   <span class="type">FONTID</span>                   fontid
4   <span class="type">BITMAPFORMAT</span>             format
4   n                        number of chars entries
2*n <span class="type">LISTofCHAR2B</span>             chars
p                            unused, p=pad(2*n)
▶
1   0                        type reply
1                            unused
2   <span class="type">CARD16</span>                   sequence-number
4   5+2*n+(m+p)/4            length
4   <span class="type">CARD32</span>                   replies-following-hint
4   n                        number of offsets
4   m                        number of bytes of glyph images
8*n <span class="type">LISTofOFFSET32</span>           offsets
m   <span class="type">LISTofBYTE</span>               glyphimages
p                            unused, p=pad(m)

<a class="link" href="#Requests:CloseFont" title="CloseFont"><span class="bold"><strong><code class="function">CloseFont</code></strong></span></a>
1   21                       major-opcode
1                            unused
2   2                        length
4   <span class="type">FONTID</span>                   fontid
</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Encoding::Errors"></a>Errors</h2></div></div></div><pre class="literallayout">

<a class="link" href="#Errors:Request" title="Request"><span class="bold"><strong><span class="errorname">Request</span></strong></span></a>
1   1                        type error
1   0                        <span class="errorname">Request</span>
2   <span class="type">CARD16</span>                   sequence-number
4   4                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused

<a class="link" href="#Errors:Format" title="Format"><span class="bold"><strong><span class="errorname">Format</span></strong></span></a>
1   1                        type error
1   1                        <span class="errorname">Format</span>
2   <span class="type">CARD16</span>                   sequence-number
4   5                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused
4   <span class="type">BITMAPFORMAT</span>             bad-format

<a class="link" href="#Errors:Font" title="Font"><span class="bold"><strong><span class="errorname">Font</span></strong></span></a>
1   1                        type error
1   2                        <span class="errorname">Font</span>
2   <span class="type">CARD16</span>                   sequence-number
4   5                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused
4   <span class="type">FONTID</span>                   bad-fontid

<a class="link" href="#Errors:Range" title="Range"><span class="bold"><strong><span class="errorname">Range</span></strong></span></a>
1   1                        type error
1   3                        <span class="errorname">Range</span>
2   <span class="type">CARD16</span>                   sequence-number
4   5                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused
4   <span class="type">RANGE</span>                    bad-range

<a class="link" href="#Errors:EventMask" title="EventMask"><span class="bold"><strong><span class="errorname">EventMask</span></strong></span></a>
1   1                        type error
1   4                        <span class="errorname">EventMask</span>
2   <span class="type">CARD16</span>                   sequence-number
4   5                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused
4   <span class="type">EVENTMASK</span>                event-mask

<a class="link" href="#Errors:AccessContext" title="AccessContext"><span class="bold"><strong><span class="errorname">AccessContext</span></strong></span></a>
1   1                        type error
1   5                        <span class="errorname">AccessContext</span>
2   <span class="type">CARD16</span>                   sequence-number
4   5                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused
4   <span class="type">ACCESSCONTEXT</span>            access context

<a class="link" href="#Errors:IDChoice" title="IDChoice"><span class="bold"><strong><span class="errorname">IDChoice</span></strong></span></a>
1   1                        type error
1   6                        <span class="errorname">IDChoice</span>
2   <span class="type">CARD16</span>                   sequence-number
4   5                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused
4   <span class="type">FONTID</span>                   bad-fontid

<a class="link" href="#Errors:Name" title="Name"><span class="bold"><strong><span class="errorname">Name</span></strong></span></a>
1   1                        type error
1   7                        <span class="errorname">Name</span>
2   <span class="type">CARD16</span>                   sequence-number
4   4                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused

<a class="link" href="#Errors:Resolution" title="Resolution"><span class="bold"><strong><span class="errorname">Resolution</span></strong></span></a>
1   1                        type error
1   8                        <span class="errorname">Resolution</span>
2   <span class="type">CARD16</span>                   sequence-number
4   5                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
6   <span class="type">RESOLUTION</span>               resolution

<a class="link" href="#Errors:Alloc" title="Alloc"><span class="bold"><strong><span class="errorname">Alloc</span></strong></span></a>
1   1                        type error
1   9                        <span class="errorname">Alloc</span>
2   <span class="type">CARD16</span>                   sequence-number
4   4                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused

<a class="link" href="#Errors:Length" title="Length"><span class="bold"><strong><span class="errorname">Length</span></strong></span></a>
1   1                        type error
1   10                       <span class="errorname">Length</span>
2   <span class="type">CARD16</span>                   sequence-number
4   5                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused
4   <span class="type">CARD32</span>                   bad-length

<a class="link" href="#Errors:Implementation" title="Implementation"><span class="bold"><strong><span class="errorname">Implementation</span></strong></span></a>
1   1                        type error
1   11                       <span class="errorname">Implementation</span>
2   <span class="type">CARD16</span>                   sequence-number
4   4                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">CARD8</span>                    major-opcode
1   <span class="type">CARD8</span>                    minor-opcode
2                            unused

</pre></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="Encoding::Events"></a>Events</h2></div></div></div><pre class="literallayout">
<a class="link" href="#Events:KeepAlive" title="KeepAlive"><span class="bold"><strong><code class="function">KeepAlive</code></strong></span></a>
1   2                        type event
1   0                        event KeepAlive
2   <span class="type">CARD16</span>                   sequence-number
4   3                        length
4   <span class="type">TIMESTAMP</span>                timestamp

<a class="link" href="#Events:CatalogueListNotify" title="CatalogueListNotify"><span class="bold"><strong><code class="function">CatalogueListNotify</code></strong></span></a>
1   2                        type event
1   1                        event CatalogueListNotify
2   <span class="type">CARD16</span>                   sequence-number
4   4                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">BOOL</span>                     added
1   <span class="type">BOOL</span>                     deleted
2                            unused

<a class="link" href="#Events:FontListNotify" title="FontListNotify"><span class="bold"><strong><code class="function">FontListNotify</code></strong></span></a>
1   2                        type event
1   2                        event FontListNotify
2   <span class="type">CARD16</span>                   sequence-number
4   4                        length
4   <span class="type">TIMESTAMP</span>                timestamp
1   <span class="type">BOOL</span>                     added
1   <span class="type">BOOL</span>                     deleted
2                            unused

</pre></div></div><div class="chapter"><div class="titlepage"><div><div><h1 class="title"><a id="Acknowledgements"></a>Chapter 6. Acknowledgements</h1></div></div></div><p>
This document represents the culmination of several years of debate and
experiments done under the auspices of the
<span class="orgname">MIT X Consortium</span> font working group.
Although this was a group effort, the author remains responsible for any errors
or omissions.  The protocol presented here was primarily designed by
<span class="personname"><span class="firstname">Jim</span> <span class="surname">Fulton</span></span>,
<span class="personname"><span class="firstname">Keith</span> <span class="surname">Packard</span></span>,
and
<span class="personname"><span class="firstname">Bob</span> <span class="surname">Scheifler</span></span>.
Special thanks goes to
<span class="personname"><span class="firstname">Ned</span> <span class="surname">Batchelder</span></span>,
<span class="personname"><span class="firstname">Jim</span> <span class="surname">Flowers</span></span>,
and
<span class="personname"><span class="firstname">Axel</span> <span class="surname">Deininger</span></span>
for their invigorating comments
which never failed to make this a better document.
<span class="personname"><span class="firstname">Stephen</span> <span class="surname">Gildea</span></span>
edited version 2 of this document.  Finally,
<span class="personname"><span class="firstname">David</span> <span class="surname">Lemke</span></span>
deserves great credit for designing and coding the sample implementation.
</p></div><div class="bibliography"><div class="titlepage"><div><div><h1 class="title"><a id="References"></a>References</h1></div></div></div><p>
All of the following documents are X Consortium standards available from
the X Consortium.
</p><div class="biblioentry"><a id="References:x11proto"></a><p>[<abbr class="abbrev">1</abbr>] <span class="title"><em><span class="olink">X Window System Protocol Version 11</span></em>. </span><span class="author"><span class="firstname">Robert W.</span> <span class="surname">Scheifler</span>. </span></p></div><div class="biblioentry"><a id="References:bdf-spec"></a><p>[<abbr class="abbrev">2</abbr>] <span class="corpauthor">Adobe Systems. </span><span class="title"><em>Bitmap Distribution Format 2.1</em>. </span></p></div><div class="biblioentry"><a id="References:xlfd-spec"></a><p>[<abbr class="abbrev">3</abbr>] <span class="corpauthor">X Consortium. </span><span class="title"><em><span class="olink">X Logical Font
  Description Conventions, Version 1.5</span></em>. </span></p></div></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a id="suggested_licensing_policies"></a>Appendix A. Suggested Licensing Policies</h1></div></div></div><p>
The authorization data passed by the client in the initial connection
setup information may be used by the font server to implement restrictions
on which fonts may be accessed.  Furthermore, the font server is free to
refuse new connections at any time.
</p><p>
Configuration or management of the license restrictions is outside the scope of
the font service protocol and is done in a server-dependent manner.  Possible
policies might include, but are not limited to, combinations of the following:

</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">No restrictions</span></dt><dd><p>
anyone may access any fonts.  The server neither refuses any connections
nor generates <a class="link" href="#Errors:AccessContext" title="AccessContext"><span class="errorname">AccessContext</span></a> errors on any
fonts.  For environments without specially-licensed fonts, this is
sufficient.
    </p></dd><dt><span class="term">Per-machine</span></dt><dd><p>
only those clients connecting from a known set of
machines are permitted access.  The server could get the address
of the connection and look in a list of allowed machines.
    </p></dd><dt><span class="term">Per-user</span></dt><dd><p>
only a known set of users may access the fonts.  The
server can use the authorization data (such as a Kerberos ticket
or a Secure RPC credential) to verify the identity of the user
and then look in a list of allowed users.
    </p></dd><dt><span class="term">Simultaneous Use</span></dt><dd><p>
only a certain number of clients may use a given font at any one time.
Additional clients would receive <a class="link" href="#Errors:AccessContext" title="AccessContext"><span class="errorname">AccessContext</span></a>
errors if they attempt to open the font.  This is only effective if
the initial clients keep the font open for the entire time that it
is being used (even if all of the data has been transmitted and is
being cached).
    </p></dd><dt><span class="term">Postage Meter</span></dt><dd><p>
a particular font may only be accessed a limited
number of times before its license must be renewed.  Each time
the font is opened, the server decrements a counter.  When the
counter reaches zero, all further attempts to open the font
return an <a class="link" href="#Errors:AccessContext" title="AccessContext"><span class="errorname">AccessContext</span></a> error.
    </p></dd></dl></div><p>
</p><p>
It should be noted that chaining of font servers (obtaining font data from
other font servers) may conflict with certain license policies.
</p></div><div class="appendix"><div class="titlepage"><div><div><h1 class="title"><a id="implementation_suggestions"></a>Appendix B. Implementation Suggestions</h1></div></div></div><p>
Font server implementations will probably wish to use techniques such as the
following to avoid limits on the number of simultaneous connections:
</p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem"><p>
The initial connection information returned by the font
server contains the names of other font servers that
may be used as substitutes.  A font server may refuse to
accept a connection, indicating that the client should
try one of the alternatives instead.
    </p></li><li class="listitem"><p>
On operating systems that support processing forking, font
servers might choose to fork so that the child can continue
processing the existing connections and the parent can accept
new connections.  Such implementations are encouraged to use
shared memory so that in-memory font databases can be shared.
    </p></li><li class="listitem"><p>
On operating systems that support passing stream file descriptors
between processes, cooperating font servers could collect
connections in a single process when there are few connections
and spread them among several processes as the load increases.
    </p></li><li class="listitem"><p>
If a font client is unable to connect to a server (as opposed
to having the connection terminated), it should retry for an
implementation-dependent length of time (see Xlib's
handling of ECONNREFUSED in XConnDis.c).
    </p></li></ul></div></div><div class="index"><div class="titlepage"><div><div><h1 class="title"><a id="index"></a>Index</h1></div></div></div><div xmlns:xlink="http://www.w3.org/1999/xlink" class="index"><div class="indexdiv"><h3>A</h3><dl><dt id="ientry-idm146">ACCESSCONTEXT, <a class="indexterm" href="#Data_Types:ACCESSCONTEXT">ACCESSCONTEXT</a></dt><dt id="ientry-idm1134">AllCharactersExist, <a class="indexterm" href="#Constant:AllCharactersExist">XFONTINFO</a></dt><dt id="ientry-idm172">ALTERNATESERVER, <a class="indexterm" href="#Data_Types:ALTERNATESERVER">ALTERNATESERVER</a></dt><dt id="ientry-idm202">AUTH, <a class="indexterm" href="#Data_Types:AUTH">AUTH</a></dt></dl></div><div class="indexdiv"><h3>B</h3><dl><dt id="ientry-idm228">BITMAPFORMAT, <a class="indexterm" href="#Data_Types:BITMAPFORMAT">BITMAPFORMAT</a></dt><dt id="ientry-idm453">BITMAPFORMATMASK, <a class="indexterm" href="#Data_Types:BITMAPFORMATMASK">BITMAPFORMATMASK</a></dt><dt id="ientry-idm505">BOOL, <a class="indexterm" href="#Data_Types:BOOL">BOOL</a></dt><dt id="ientry-idm537">BYTE, <a class="indexterm" href="#Data_Types:BYTE">BYTE</a></dt></dl></div><div class="indexdiv"><h3>C</h3><dl><dt id="ientry-idm557">CARD16, <a class="indexterm" href="#Data_Types:CARDn">CARD8, CARD16, CARD32</a></dt><dt id="ientry-idm559">CARD32, <a class="indexterm" href="#Data_Types:CARDn">CARD8, CARD16, CARD32</a></dt><dt id="ientry-idm555">CARD8, <a class="indexterm" href="#Data_Types:CARDn">CARD8, CARD16, CARD32</a></dt><dt id="ientry-idm3284">CatalogueListNotify, <a class="indexterm" href="#Events:CatalogueListNotify">CatalogueListNotify</a></dt><dt id="ientry-idm583">CHAR2B, <a class="indexterm" href="#Data_Types:CHAR2B">CHAR2B</a></dt><dt id="ientry-idm2780">close connection, <a class="indexterm" href="#Requests:close_connection">close connection</a></dt><dt id="ientry-idm2749">CloseFont, <a class="indexterm" href="#Requests:CloseFont">CloseFont</a></dt><dt id="ientry-idm1876">CreateAC, <a class="indexterm" href="#Requests:CreateAC">CreateAC</a></dt></dl></div><div class="indexdiv"><h3>E</h3><dl><dt id="ientry-idm2841">Error Codes</dt><dd><dl><dt>AccessContext, <a class="indexterm" href="#Errors:AccessContext">AccessContext</a></dt><dt>Alloc, <a class="indexterm" href="#Errors:Length">Length</a></dt><dt>EventMask, <a class="indexterm" href="#Errors:EventMask">EventMask</a></dt><dt>Font, <a class="indexterm" href="#Errors:Font">Font</a></dt><dt>Format, <a class="indexterm" href="#Errors:Format">Format</a></dt><dt>IDChoice, <a class="indexterm" href="#Errors:IDChoice">IDChoice</a></dt><dt>Implementation, <a class="indexterm" href="#Errors:Implementation">Implementation</a></dt><dt>Length, <a class="indexterm" href="#Errors:Length">Length</a></dt><dt>Name, <a class="indexterm" href="#Errors:Name">Name</a></dt><dt>Range, <a class="indexterm" href="#Errors:Range">Range</a></dt><dt>Request, <a class="indexterm" href="#Errors:Request">Request</a></dt><dt>Resolution, <a class="indexterm" href="#Errors:Resolution">Resolution</a></dt></dl></dd><dt id="ientry-idm608">EVENTMASK, <a class="indexterm" href="#Data_Types:EVENTMASK">EVENTMASK</a></dt></dl></div><div class="indexdiv"><h3>F</h3><dl><dt id="ientry-idm664">FONTID, <a class="indexterm" href="#Data_Types:FONTID">FONTID</a></dt><dt id="ientry-idm3313">FontListNotify, <a class="indexterm" href="#Events:FontListNotify">FontListNotify</a></dt><dt id="ientry-idm1981">FreeAC, <a class="indexterm" href="#Requests:FreeAC">FreeAC</a></dt></dl></div><div class="indexdiv"><h3>G</h3><dl><dt id="ientry-idm1768">GetCatalogues, <a class="indexterm" href="#Requests:GetCatalogues">GetCatalogues</a></dt><dt id="ientry-idm1840">GetEventMask, <a class="indexterm" href="#Requests:GetEventMask">GetEventMask</a></dt><dt id="ientry-idm2108">GetResolution, <a class="indexterm" href="#Requests:GetResolution">GetResolution</a></dt></dl></div><div class="indexdiv"><h3>H</h3><dl><dt id="ientry-idm1029">horizontal escapement, <a class="indexterm" href="#Data_Types:XCHARINFO">XCHARINFO</a></dt><dt id="ientry-idm1149">HorizontalOverlap, <a class="indexterm" href="#Constant:HorizontalOverlap">XFONTINFO</a></dt></dl></div><div class="indexdiv"><h3>I</h3><dl><dt id="ientry-idm684">ID, <a class="indexterm" href="#Data_Types:ID">ID</a></dt><dt id="ientry-idm374">ImageRectMax, <a class="indexterm" href="#Constant:ImageRectMax">BITMAPFORMAT</a></dt><dt id="ientry-idm359">ImageRectMaxWidth, <a class="indexterm" href="#Constant:ImageRectMaxWidth">BITMAPFORMAT</a></dt><dt id="ientry-idm347">ImageRectMin, <a class="indexterm" href="#Constant:ImageRectMin">BITMAPFORMAT</a></dt><dt id="ientry-idm1142">InkInside, <a class="indexterm" href="#Constant:InkInside">XFONTINFO</a></dt><dt id="ientry-idm713">INT16, <a class="indexterm" href="#Data_Types:INTn">INT8, INT16, INT32</a></dt><dt id="ientry-idm715">INT32, <a class="indexterm" href="#Data_Types:INTn">INT8, INT16, INT32</a></dt><dt id="ientry-idm711">INT8, <a class="indexterm" href="#Data_Types:INTn">INT8, INT16, INT32</a></dt></dl></div><div class="indexdiv"><h3>K</h3><dl><dt id="ientry-idm3276">KeepAlive, <a class="indexterm" href="#Events:KeepAlive">KeepAlive</a></dt></dl></div><div class="indexdiv"><h3>L</h3><dl><dt id="ientry-idm1153">LeftToRight, <a class="indexterm" href="#Data_Types:XFONTINFO.DRAWING-DIRECTION">XFONTINFO</a></dt><dt id="ientry-idm1676">ListCatalogues, <a class="indexterm" href="#Requests:ListCatalogues">ListCatalogues</a></dt><dt id="ientry-idm1567">ListExtensions, <a class="indexterm" href="#Requests:ListExtensions">ListExtensions</a></dt><dt id="ientry-idm2134">ListFonts, <a class="indexterm" href="#Requests:ListFonts">ListFonts</a></dt><dt id="ientry-idm2196">ListFontsWithXInfo, <a class="indexterm" href="#Requests:ListFontsWithXInfo">ListFontsWithXInfo</a></dt></dl></div><div class="indexdiv"><h3>N</h3><dl><dt id="ientry-idm1549">NoOp, <a class="indexterm" href="#Requests:NoOp">NoOp</a></dt></dl></div><div class="indexdiv"><h3>O</h3><dl><dt id="ientry-idm739">OFFSET32, <a class="indexterm" href="#Data_Types:OFFSET32">OFFSET32</a></dt><dt id="ientry-idm1336">open connection, <a class="indexterm" href="#Requests:open_connection">open connection</a></dt><dt id="ientry-idm2265">OpenBitmapFont, <a class="indexterm" href="#Requests:OpenBitmapFont">OpenBitmapFont</a></dt></dl></div><div class="indexdiv"><h3>P</h3><dl><dt id="ientry-idm763">PROPINFO, <a class="indexterm" href="#Data_Types:PROPINFO">PROPINFO</a></dt><dt id="ientry-idm790">PROPOFFSET, <a class="indexterm" href="#Data_Types:PROPOFFSET">PROPOFFSET</a></dt></dl></div><div class="indexdiv"><h3>Q</h3><dl><dt id="ientry-idm1592">QueryExtension, <a class="indexterm" href="#Requests:QueryExtension">QueryExtension</a></dt><dt id="ientry-idm2639">QueryXBitmaps16, <a class="indexterm" href="#Requests:QueryXBitmaps16">QueryXBitmaps16</a></dt><dt id="ientry-idm2572">QueryXBitmaps8, <a class="indexterm" href="#Requests:QueryXBitmaps8">QueryXBitmaps8</a></dt><dt id="ientry-idm2498">QueryXExtents16, <a class="indexterm" href="#Requests:QueryXExtents16">QueryXExtents16</a></dt><dt id="ientry-idm2450">QueryXExtents8, <a class="indexterm" href="#Requests:QueryXExtents8">QueryXExtents8</a></dt><dt id="ientry-idm2413">QueryXInfo, <a class="indexterm" href="#Requests:QueryXInfo">QueryXInfo</a></dt></dl></div><div class="indexdiv"><h3>R</h3><dl><dt id="ientry-idm881">RANGE, <a class="indexterm" href="#Data_Types:RANGE">RANGE</a></dt><dt id="ientry-idm910">RESOLUTION, <a class="indexterm" href="#Data_Types:RESOLUTION">RESOLUTION</a></dt><dt id="ientry-idm1155">RightToLeft, <a class="indexterm" href="#Data_Types:XFONTINFO.DRAWING-DIRECTION">XFONTINFO</a></dt></dl></div><div class="indexdiv"><h3>S</h3><dl><dt id="ientry-idm2024">SetAuthorization, <a class="indexterm" href="#Requests:SetAuthorization">SetAuthorization</a></dt><dt id="ientry-idm1734">SetCatalogues, <a class="indexterm" href="#Requests:SetCatalogues">SetCatalogues</a></dt><dt id="ientry-idm1799">SetEventMask, <a class="indexterm" href="#Requests:SetEventMask">SetEventMask</a></dt><dt id="ientry-idm2073">SetResolution, <a class="indexterm" href="#Requests:SetResolution">SetResolution</a></dt><dt id="ientry-idm874">Signed, <a class="indexterm" href="#Constant:Signed">PROPOFFSET</a></dt><dt id="ientry-idm858">String, <a class="indexterm" href="#Constant:String">PROPOFFSET</a></dt><dt id="ientry-idm942">STRING8, <a class="indexterm" href="#Data_Types:STRING8">STRING8</a></dt></dl></div><div class="indexdiv"><h3>T</h3><dl><dt id="ientry-idm968">TIMESTAMP, <a class="indexterm" href="#Data_Types:TIMESTAMP">TIMESTAMP</a></dt></dl></div><div class="indexdiv"><h3>U</h3><dl><dt id="ientry-idm866">Unsigned, <a class="indexterm" href="#Constant:Unsigned">PROPOFFSET</a></dt></dl></div><div class="indexdiv"><h3>X</h3><dl><dt id="ientry-idm985">XCHARINFO, <a class="indexterm" href="#Data_Types:XCHARINFO">XCHARINFO</a></dt><dt id="ientry-idm1045">XFONTINFO, <a class="indexterm" href="#Data_Types:XFONTINFO">XFONTINFO</a></dt></dl></div></div></div></div></body></html>